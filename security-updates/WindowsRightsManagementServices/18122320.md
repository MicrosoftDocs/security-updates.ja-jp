---
TOCTitle: RMS Active Directory キャッシュ
Title: RMS Active Directory キャッシュ
ms:assetid: 'c721a2eb-2fe9-4346-b426-3cc169b97265'
ms:contentKeyID: 18122320
ms:mtpsurl: 'https://technet.microsoft.com/ja-jp/library/Cc747662(v=WS.10)'
---

RMS Active Directory キャッシュ
===============================

各 RMS ルート証明サーバー (またはルート証明クラスタ) および各ライセンス サーバーは、Active Directory グローバル カタログ グループ メンバシップのクエリ結果を格納するローカル Active Directory キャッシュを備えています。サーバーごとのキャッシュに加えて、各クラスタはディレクトリ サービス データベースに格納される共有キャッシュを備えています。これらのキャッシュの目的は、グローバル カタログに送信されるクエリ数を減らし、ライセンス要求に対する応答時間を短縮することにあります。

使用ライセンスが要求されると、応答側のサーバーは、要求側のユーザーが発行ライセンスに必要な権利を有しているかどうかを評価する必要があります。単純なケースでは、発行ライセンスに、ライセンス要求元のユーザー名が明示的に指定されています。しかし、作成者は、個々のユーザーではなく、グループに権利を付与するのが一般的です。

発行ライセンスに、要求元のユーザー名が明示的に指定されず、グループに権利が付与されている場合、サーバーはそのユーザーのグループ メンバシップを評価して、権利を付与されたグループのメンバであるかどうかを判定する必要があります。これは、サーバーが、グローバル カタログに対して LDAP クエリを送信することによって行われます。

RMS サーバーは、ローカル Active Directory キャッシュと、クラスタのディレクトリ サービス データベースの両方に、グループ メンバシップ クエリのすべての結果をキャッシュします。サーバーは、その後、これらのキャッシュからグループ メンバシップ情報を取得できるため、グローバル カタログに送信するクエリの回数が低減されます。既定では、最も近くにあるサーバーがクエリの対象になりますが、GC レジストリ キーを構成することにより、クエリの対象をグローバル カタログ サーバーにリダイレクトできます。この設定の詳細については、このドキュメント コレクションの「RMS サーバーの運用」にある「接続プール レジストリ設定の変更」を参照してください。

サーバーはユーザーのグループ メンバシップを評価する際、まず、目的のユーザーのグループ メンバシップ情報がキャッシュに存在するかどうかを調べます。この情報がキャッシュに存在しない場合は、クラスタのディレクトリ サービス データベースを調べます。このデータベースにも、グループ メンバシップ情報が格納されていない場合、サーバーはグローバル カタログに対してクエリを送信します。

ユーザーおよびグループについて、次の Active Directory 属性がキャッシュされます。

-   mail
-   ProxyAddresses (SMTP 電子メール アドレスのみ)
-   objectSID
-   sidHistory
-   memberOf (ユーザーまたはグループが属するグループの GUID)

ローカル Active Directory キャッシュのエントリには、タイムスタンプが付加されます。レジストリの設定により、キャッシュ可能なエントリ数のほか、キャッシュにおけるエントリの存続時間を指定できます。これらの設定は、サーバーのパフォーマンスに影響します。詳細については、このドキュメント コレクションの「RMS サーバーの運用」にある「Active Directory キャッシュ設定の変更」を参照してください。
