---
TOCTitle: 更新プログラムの格納場所の指定
Title: 更新プログラムの格納場所の指定
ms:assetid: '8cca6fab-163e-451d-ab78-70b39fdb1455'
ms:contentKeyID: 18111600
ms:mtpsurl: 'https://technet.microsoft.com/ja-jp/library/Cc708480(v=WS.10)'
---

更新プログラムの格納場所の指定
==============================

更新ファイルをローカル WSUS サーバー上に格納するか、クライアントがMicrosoft Update から直接取得するかを指定できます。更新ファイルをローカルに格納する方法を選択した場合は、サーバーにダウンロードする更新ファイルの言語を指定できます。更新ファイルを Microsoft Update から直接取得する方法を選択した場合、WSUS サーバーは、\[同期のオプション\] ページで指定した条件と一致する更新情報 (メタデータ) のみを取得します。この場合、更新プログラムを受信するクライアント コンピュータに更新プログラムをインストールする時点で、更新ファイルが Microsoft Update から直接取得されてダウンロードされます。この方法を使用するときは、クライアント コンピュータが Microsoft Update に直接アクセスできることを確認する必要があります。

### ローカル記憶域に関する注意事項

更新ファイルをサーバー上に格納する場合、推奨する最低限のディスク領域は 30 GB です。ただし、指定する同期オプションによっては、より多くのディスク領域を必要とすることがあります。たとえば、以下の手順にあるように、詳細な同期のオプションを指定する場合、複数の言語をダウンロードするオプションや、高速インストール ファイルをダウンロードするオプションを選択すると、サーバーのディスクは簡単に 30 GB に達することがあります。そこで、これらのオプションを選択する場合は、100 GB などの、より大容量のディスクをインストールしてください。

ディスクがいっぱいになった場合は、より大容量の新しいディスクをインストールして、更新ファイルを新しい場所に移動できます。これを行うには、新しいディスク ドライブの作成後、**movecontent** コマンドを使用して WSUSutil.exe ツールを実行し、更新ファイルを新しいディスクに移動します。この手順については、「[コマンド ラインからの WSUS の管理](http://www.microsoft.com/japan/technet/windowsserver/2003/library/wsus/wsusoperationsguidetc/2686bd2b-910a-479b-961e-cea2a2028024.mspx?mfr=true)」を参照してください。

#### 高速インストール ファイルについて

高速インストール ファイルは、通常の更新プログラム パッケージより何倍もサイズが大きいパッケージとしてダウンロードされます。高速インストール ファイルのパッケージには、特定のクライアント コンピュータ構成に適用される、さまざまなバージョンの更新プログラムが含まれています。このオプションを選択すると、複数バージョンの更新ファイルがすべて含まれているパッケージが WSUS サーバーにダウンロードされます。しかし、クライアント コンピュータがそのサーバーに接続すると、そのクライアント コンピュータに必要な更新ファイルだけがダウンロードされます。これは、特定のコンピュータに対応しているファイルです。内部帯域幅の使用状況ほど外部帯域幅について考慮する必要がない場合は、高速インストール ファイルのオプションを選択することも可能です。

前に述べた帯域幅以外に、高速インストール ファイルのダウンロードを選択する際のもう 1 つの注意事項にはディスク領域があります。高速インストール ファイルのダウンロードを選択すると、より多くのディスク領域が必要となります。したがって、このオプションを選択する場合は、30 GB より大きいディスクを使用してください。

高速インストール ファイルをダウンロードおよび格納するオプションについては、次の手順 3 で説明します。

##### ダウンロードする更新ファイルの格納場所を指定するには

1.  WSUS コンソールのツール バーで、\[オプション\]、\[同期のオプション\] の順にクリックします。

2.  \[更新ファイルと更新言語\] の \[詳細\] をクリックします。

3.  \[更新ファイル\] で、Windows Server Update Services (WSUS) を実行しているサーバーと Microsoft Update のどちらに更新ファイルを格納するか選択します。サーバーに更新ファイルを格納するよう選択する場合は、承認されたときのみ更新ファイルをダウンロードするか、または高速インストール ファイルをダウンロードするか選択できます。

4.  WSUS サーバーにファイルを格納するよう選択した場合は、\[言語\] で、WSUS サーバーにダウンロードする更新プログラムを言語別に制限するかどうか選択し、\[OK\] をクリックします。既定で選択されている、すべての言語のダウンロードを選択すると、より多くのディスク領域が必要となることに注意してください。WSUS サーバーへの更新ファイルの格納も選択している場合は、できれば、ダウンロードする言語を制限することを検討してください。

5.  \[タスク\] の \[設定の保存\]、\[OK\] の順にクリックします。

> [!NOTE]

> WSUS サーバーをレプリカ モードで実行している場合は、このタスクを実行できません。レプリカ モードの詳細については、「[レプリカ モードでの実行](http://www.microsoft.com/japan/technet/windowsserver/2003/library/wsus/wsusoperationsguidetc/d143c886-30b6-4034-80a2-182171ac8f8b.mspx?mfr=true)」を参照してください。

![](images/Cc708480.arrow_px_up(ja-jp,WS.10).gif) [ページのトップへ](#ctl00_rs1_eb1_panel1)

### 更新ファイルのローカルでの格納場所の変更

WSUS で更新プログラムをローカルに格納する場所を変更しなければならない場合があります。これは、ディスクがいっぱいになり、新しい更新プログラムを保管する場所がないときに行う必要があります。更新プログラムを格納しているディスクが正常に動作せず、代替のディスクが別の新しいドライブ文字を使用する場合もこの作業が必要になることがあります。

この変更を行うには、WSUSutil.exe の **movecontent** コマンドを使用します。これは、WSUS のセットアップ時に WSUS サーバーのファイル システムにコピーされるコマンド ライン ツールです。既定では、WSUSutil.exe は次の場所にコピーされます。

&lt;WSUS のインストール ドライブ&gt;:\\Program Files\\Microsoft Windows Server Update Services\\Tools\\

WSUSutil.exe の **movecontent** コマンドを使用するには、WSUS サーバーのローカル Administrators グループのメンバでなければなりません。これらの操作は、32 ビット プラットフォームである WSUS サーバー自体からのみ実行できます。

WSUSutil.exe を使用する前に、WSUS 更新プログラムのローカルな格納場所を示す新しいパスを作成しておく必要があります。**movecontent** コマンドは、オプションの **-skipcopy** パラメータを取ります。**-skipcopy** パラメータを使用すれば、ファイルをコピーすることなく WSUS 更新プログラムのローカルの格納場所を変更できます。WSUSutil.exe の詳細については、[Microsoft Windows Server Update Services 展開ガイド](http://www.microsoft.com/japan/technet/windowsserver/2003/library/wsus/wsusdeploymentguidetc/ace052df-74e7-4d6a-b5d4-f7911bb06b40.mspx?mfr=true) (http://www.microsoft.com/japan/technet/prodtechnol/windowsserver2003/library/wsus/wsusdeploymentguidetc/ace052df-74e7-4d6a-b5d4-f7911bb06b40.mspx) を参照してください。

#### WSUS 更新プログラムのローカルの格納場所を変更するには

1.  \[スタート\] ボタン、\[ファイル名を指定して実行\] の順にクリックします。

2.  \[名前\] ボックスに「cmd」と入力し、\[OK\] をクリックします。

3.  コマンド プロンプトで、WSUSutil.exe が保存されているディレクトリに移動します。

4.  次のように入力し、**Enter** キーを押します。

    **wsusutil.exe movecontent** *contentpath logfile* \[**-skipcopy**\]

    たとえば、次のように入力します。

    **wsusutil.exe movecontent D:\\WSUS1\\ D:\\move.log**

    D:\\WSUS1 は WSUS 更新プログラムのローカルの格納場所への新しいパスで、D:\\move.log はそのログ ファイルへのパスです。

> [!NOTE]

> WSUSutil.exe を使用して、WSUS 更新プログラムのローカルの格納場所を変更しない場合は、NTFS 機能を使用して、WSUS 更新プログラムの現在のローカルの格納場所にパーティションを追加できます。NTFS の詳細については、Windows Server 2003 のヘルプとサポート センターを参照してください。

![](images/Cc708480.arrow_px_up(ja-jp,WS.10).gif) [ページのトップへ](#ctl00_rs1_eb1_panel1)
