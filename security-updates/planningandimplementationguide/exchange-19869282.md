---
TOCTitle: Exchange サーバー環境におけるスパム対策
Title: Exchange サーバー環境におけるスパム対策
ms:assetid: '3eed9be9-ffd4-4138-9384-d8d849ad979c'
ms:contentKeyID: 19869282
ms:mtpsurl: 'https://technet.microsoft.com/ja-jp/library/Cc875815(v=TechNet.10)'
---

Exchange サーバー環境におけるスパム対策
=======================================

公開日: 2006年12月25日

**ダウンロード**

[『Approaches to Fighting Spam in an Exchange Server Environment』(英語) をダウンロードする](http://go.microsoft.com/fwlink/?linkid=71052)

##### トピック

[](#efaa)[はじめに](#efaa)

[](#eeaa)[定義](#eeaa)

[](#edaa)[課題](#edaa)

[](#ecaa)[ソリューション](#ecaa)

[](#ebaa)[概要](#ebaa)

[](#eaaa)[参照情報](#eaaa)

### はじめに

この文書は、中規模ビジネス セキュリティ ガイダンスの一部として提供されています。 Microsoft は、次の情報を得ることでさらにセキュリティが強化され、より生産性の高いコンピュータ環境が皆様の組織で実現されることを望んでいます。

#### 要点

迷惑メールまたはスパムとして知られている不要な電子メール メッセージは、同時に多くのメールボックスに大量送信するのが目的で 1 か所の送信元から送られます。 スパム送信者の狙いは、受信したエンドユーザーがメッセージを開封して実際に読むことで、これによって金儲けをしようとします。 スパム送信者はさまざまな手口を使って、メッセージがスパムかどうかの判断を難しくするため、ゲートウェイ レベルでは容易に検知することができません。

受信するメッセージの 40% 以上がスパムに分類されると業界では推定しています。 このような迷惑メールの増加への対応が、中規模ビジネスにとっての課題になっています。 スパムは迷惑なだけではなく、潜在的な生産性の低下、およびスパムに対処するために必要な追加的なリソースなどを考慮すると、コストが多大にかかる問題です。

したがって、スパム対策を講じる際には、実用的なソリューションを組み入れる必要があります。

Microsoft® Exchange Server 2003 Service Pack 2 (SP2) により、Exchange Server が単一または複数の環境で、いくつかのスパム対策を組み合わせたフレームワークが導入されます。 このフレームワークは、Exchange Server 2003 Anti-Spam Framework と呼ばれ、接続レベル、プロトコルレベルおよびコンテンツレベルのフィルタ機能から構成されています。

このフレームワークに組み込まれたさまざまな方法により、管理者およびエンドユーザーは、スパムを正確にフィルタリングして分類し、スパムと正当なビジネスの電子メールを区別することができます。

このフレームワークの主な目的は、管理者およびユーザーに、サーバー側およびクライアント側で適用できる十分な柔軟性を持ったソリューションを提供することです。 この文書では、これらのアプローチについて詳細に記述しています。また、このフレームワーク内の各アプローチの機能、また各アプローチの連携について実例を示しています。 評価や開発計画について、また展開および管理のセクションでは順を追ってのガイドを紹介しています。

**注**   Microsoft では、スパムに対抗する重要なサービスも提供しています。 このサービスは Exchange Hosted Services (EHS) と呼ばれます。 EHS は 4 つの別個のサービスで構成されており、電子メールに組み込まれたマルウェアからの保護、保存に関する規制の準拠、機密性保持のためのデータ暗号化、緊急時やその後の電子メールへのアクセスの確保を可能にして中規模ビジネスを支援します。
Exchange Hosted Services の核心は、データ センターをインターネット バックボーン上の複数の主要なサイトに置く、分散型ネットワークです。 各データ センターはフォールト トレラント サーバーを持ち、サイト間およびサーバー間は負荷分散されています。
このサービスの詳細な説明は、このガイドでは扱っていません。 詳細は 「[Microsoft Exchange Hosted Services の概要](http://www.microsoft.com/japan/exchange/services/services.mspx)」を参照してください。

#### 概要

この文書では、4 つのメイン セクションで構成されており、Exchange サーバー環境におけるスパム対策として実用的なアプローチを提供するためのオプションおよびソリューションを、4 つの主なセクションに分けて詳細に説明しています。 これらの 4 つの主なセクションは、 「はじめに」、「定義」、「課題」および「ソリューション」です。

##### はじめに

このセクションでは、この文書の要点をまとめています。また、文書構成の概要と、対象読者についての情報が記載されています。

##### 定義

このセクションでは、Exchange Server 2003 Anti-Spam Framework の定義および概要について詳しく説明します。 これらの詳細は、この文書で説明しているソリューションを理解するうえで役に立ちます。

##### 課題

このセクションは、Anti-Spam Framework が提供するさまざまなレベルでどのようにスパムをフィルタリングするかを決定する場合に、中規模ビジネスが直面する課題について記述しています。

##### ソリューション

このセクションでは、不要な迷惑メールがもたらす課題に対処する実践的なソリューションを説明します。 この課題に対処するためのアプローチや開発の計画を評価し、また次に挙げる手法の展開および管理を手順を追って説明します。

-   接続レベルの保護

    -   IP 接続フィルタリング

    -   
    -   リアルタイム ブロック リスト

    -   

-   
-   プロトコルレベルの保護

    -   受信者および送信者のブロック

    -   
    -   Sender ID

    -   

-   
-   コンテンツレベルの保護

    -   Exchange インテリジェント メッセージ フィルタ

    -   
    -   Outlook 2003 および Outlook Web Access を使用した迷惑メール対策

    -   

-   

Exchange Server 2003 Anti-Spam Framework に加え、ユーザーの意識向上が、Exchange Server 環境のおけるスパム対策では欠かせないと認識することが重要です。 これについては、「展開および管理」のセクションの最後で説明します。

#### 対象読者

この文書は、中規模ビジネスの Exchange サーバー環境におけるでスパム対策の計画および導入を担当する、情報技術 (IT) 専門家およびビジネス管理者を主な対象としています。 たとえば次のような役割の人が対象です。

-   **システム設計者**。 サーバー インフラストラクチャ全体の設計、サーバー展開戦略およびポリシーの策定、システム強化、およびネットワーク接続の設計を担当します。

-   
-   **情報技術管理者**。 技術面での意思決定者や、インフラストラクチャ、デスクトップ コンピュータおよびサーバーの配備、サイト全体の Exchange サーバーの管理と運用を担当する情報技術スタッフの監督者です。

-   
-   **システム管理者**。 Microsoft Exchange サーバー全体の技術の計画および導入や、新しい技術を使ったソリューションの評価と推奨を担当します。

-   
-   **Exchange メッセージングの管理者**。 組織におけるメッセージング機能の実装および管理を担当します。

[](#mainsection)[ページのトップへ](#mainsection)

### 定義

Exchange Server 2003 Anti-Spam Framework は、Exchange サーバー環境におけるスパム対策のメカニズムです。 Exchange Server 2003 SP2 のリリースにより、Sender ID フィルタと呼ばれる業界標準の電子メール認証技術が組み込まれて、このフレームワークが強化されています。 この技術により、ユーザーの受信トレイに届くスパムの数を減らすことができます。

このセクションでは、Exchange Server 2003 Anti-Spam Framework の詳細について説明します。

#### Exchange Server 2003 Anti-Spam Framework

Exchange Server 2003 では、スパム対策の保護措置が、接続レベル、プロトコルレベルおよびコンテンツレベルの 3 つの異なるレベルで適用されます。これを次の図に示します。

![](images/Cc875815.AFSESE01(ja-jp,TechNet.10).gif)

**図 1. スパム対策の 3 つのレベル**

接続レベルの保護機能では接続している SMTP ホストを分析し、プロトコル レベルの保護機能ではメッセージの送信者および受信者を分析します。また、コンテンツ レベルの保護機能では、メッセージの内容を評価します。 これらのスパム対策の保護機能のそれぞれについて、次からの各サブセクションで詳細に説明します。

##### 接続レベルの保護

接続レベルの保護は、スパムを防御する最も有効な保護層です。このレベルの保護が適用されると、スパム メッセージが中規模ビジネスに侵入することはまずありません。 次の図に示すように、接続レベルの保護は、受信している各 SMTP 接続について、スパムの送信元である可能性を評価します。

![](images/Cc875815.AFSESE02(ja-jp,TechNet.10).gif)

**図 2. 接続レベルの保護**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese02_big(ja-jp,technet.10).gif)

接続している SMTP ホストが、スパムを送信しているホストまたは通常は SMTP メッセージを送信しないと思われるホストであると特定された場合、接続が拒否されます。したがって、受信メッセージがスパムかどうか調べるための、コストがかかる繰り返し作業をしなくて済むようになります。 この目的のために、Exchange Server 2003 には 2 種類の接続レベル フィルタ機能が用意されています。

###### IP 接続フィルタ

Exchange Server 2003 では、IP アドレスを基に SMTP 接続を明示的に拒否するように指定できます。 接続をフィルタリングするためのリストは手動で管理可能なので、このアプローチは Exchange サーバーを保護する最も基本的な方法と言えます。 一定の理由で (スパム送信元である可能性など) 特定のホストからの受信 SMTP 接続を拒否したい場合、このレベルで拒否されます。

SMTP 接続は明示的に許可することが可能です。 スパム送信元と特定され、ブロックされている SMTP ホストからのメールを受信したい場合は、本来は拒否されるその SMTP ホストからのメッセージの受信を許可するように指定できます。

###### リアルタイム ブロック リスト

より動的に接続レベルの保護を行うには、リアルタイム ブロック リスト (RBL) を使用します。 ブロック リストは IP アドレスのリストで、既知のスパム送信元、オープン リレー、SMTP ホストとして含まれない範囲 (Microsoft MSN® ダイヤルアップ プールに含まれる IP アドレスなど) などの IP アドレスが含まれます。

サード パーティのブロック リスト プロバイダは各プロファイルに合致する IP アドレスを収集しています。 送信ホストがブロック リスト サービスの加入者と SMTP セッションを開始すると、サービス加入者は接続しているホストの IP アドレスを使って、一種のドメイン ネーム システム (DNS) クエリをブロック リスト プロバイダに発行します。 次に、ブロック リスト プロバイダは、接続しているホストがリストにあるかどうかを示すコードを返します。 このコードを使って、接続している SMTP ホストがどのリストに載っているかを示すこともできます。

リアルタイム ブロック リスト フィルタ機能のプロセスは次のとおりです。また下の図にそのプロセスを示します。

1.  SMTP ホストは、Transmission Control Protocol (TCP) の ポート 25 を使って Exchange Server 2003 サーバーに接続します。

2.  3.  Exchange Server 2003 サーバーは、構成されたブロック リスト プロバイダにクエリを送信して、接続している SMTP ホストがブロック リストにないことを確認します。

4.  5.  接続している SMTP ホストがブロック リストにない場合は、接続が許可されます。 ブロック リストにある場合は、接続が切断されます。

6.  

![](images/Cc875815.AFSESE03(ja-jp,TechNet.10).gif)

**図 3. リアル タイム ブロック リスト フィルタリングの仕組み**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese03_big(ja-jp,technet.10).gif)

Exchange Server 2003 SP2 以前では、ファイアウォールまたは中間 SMTP ホストが Exchange と送信元の間に存在する場合 (Exchange は境界ネットワークの背後に配置されています）、接続フィルタ機能は使用できませんでした。Exchange Server 2003 SP2 以前の接続フィルタリングは、接続しているホストのみを対象としているためです。 中間ホスト (ファイアウォールまたは他の SMTP 機器) が送信ホストと Exchange と間に存在している場合、この中間ホストのみが対象となります。

Exchange Server 2003 SP2 のリリースにより、Exchange サーバーは中規模ビジネスのあらゆる位置に設置が可能となり、どの位置でも接続を正しくフィルタできます。 この機能は、Exchange システム マネージャで境界 IP の一覧および内部 IP の範囲を設定することにより実現されます。 これにより、Sender ID および リアルタイム ブロック リスト機能は、ファイアウォールなどの中間 SMTP ホストに接続している IP アドレスを分析します。

##### プロトコルレベルの保護

![](images/Cc875815.AFSESE04(ja-jp,TechNet.10).gif)

**図 4. プロトコルレベルの保護**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese04_big(ja-jp,technet.10).gif)

SMTP メッセージが接続レベルの保護を通過すると、次の防御層は SMTP プロトコル レベルに用意されています。 送信 SMTP ホストと受信 SMTP ホストの間の SMTP ダイアログを分析して、送信者および受信者が許可されているかを確認し、送信者の SMTP ドメイン名を割り出します。

###### 受信者および送信者のブロック

手動でスパムを減らすには、メッセージを受信したくない送信者やドメインを個別に定義する方法があります。 送信者のブロック機能により、ブロックする個別の SMTP アドレスまたはドメインを指定できます。 Exchange Server 2003 では、送信者のアドレスが空白のメッセージを無効にできます。またフィルタされたメッセージのアーカイブも可能です。

受信者フィルタ機能により、特定の受信者に送信されたメッセージをフィルタできます。 また、ディレクトリにない受信者をフィルタすることもできます。 ただし、ディレクトリにない受信者のフィルタリングを有効にすると、ディレクトリ ハーベスト攻撃 (DHA) として知られている、SMTP 電子メール アドレスのハーベスト攻撃に対し脆弱になります。 この状態では、*RFC2821 RCPT TO:* コマンドに応答する Exchange サーバーは、 有効な SMTP アドレスを見つけるために解析されてしまいます。 SMTP プロトコルでは SMTP セッション中に *250 2.1.5* 応答を返して、受信可能な受信者を承認します。 電子メールが受信者リストに存在しない受信者に送信された場合、Exchange サーバーは *550 5.1.1 User unknown* エラーを返します。 したがって、スパム送信者は、よく使われる名前や辞書に載っている言葉などを使用する自動化プログラムを作成して、特定のドメインに送信する電子メール アドレスを作ることが可能です。 この自動化プログラムは、*250 2.1.5 を RCPT TO: SMTP* コマンドに返すすべての電子メール アドレスを収集して、*550 5.1.1 User unknown* エラーを返すすべての電子メール アドレスを破棄します。 次にスパム送信者は、有効な電子メール アドレスを売ったり、一方的に送り付けるメールの宛先として使用することが可能です。

この脅威は、*タールピッティング*という手法で軽減することが可能です。 Microsoft Windows Server™ 2003 SP1 の SMTP タールピット機能により、管理者はいくつかの SMTP プロトコル応答を返す前に遅延を構成して挿入することが可能です。 攻撃をしてくるホストは、この応答を待つほど長い時間待機しません。

詳細は、Microsoft サポート技術情報「[Microsoft Windows Server 2003 の SMTP タールピット機能](http://support.microsoft.com/kb/842851/ja)」を参照してください。

###### Sender ID

Exchange Server 2003 のスパム対策に加えられた最新の機能の 1 つが、Sender ID フィルタです。 Exchange Server 2003 SP2 に組み込まれているこの機能は、送信している SMTP ホストが、送信に使用している電子メール アドレスから特定されるドメインからメッセージを送信することを許可されているかどうかを検証します。 多くのスパム メッセージは、正当な電子メール アドレスから送られたように偽装されています。 電子メールの受信者に、電子メールが正当な機関 (銀行の担当者、カスタマー サービスなど) からのものであると思わせることにより、ユーザーは気付かないうちに貴重な情報を開示してしまい、身元情報の盗難につながります。 Sender ID は、なりすましメッセージを低減または排除します。  

Sender ID が機能するためには、2 つの部分が必要です。 第一は、SPF (Ssender Policy Framework) レコードとして知られている DNS レコードです。 SPF レコードは、あるドメインの SMTP アドレスの送信が許可されているサーバーを定義するものです。 SPF レコードを使用するために Sender ID の構成を行う必要はありません。 第二は、Exchange Server 2003 SP2 などの Sender ID をサポートする SMTP ホストです。

SPF レコードを DNS ゾーンに追加することにより、他の組織は Sender ID を使用して、あるドメインからのものであると主張している受信メッセージが実際にそのドメインの SPF レコードで許可されているサーバーから送られているかを検証できます。 次の手順および図は、このプロセスの仕組みについて説明しています。最初のものは SPF レコードがない場合、次のものは SPF レコードを使用した場合です。

1.  スパムを送信している SMTP ホスト、fabrikam.com から Exchange Server 2003 にメッセージが送られます。Sender ID は有効になっています。 送信元のアドレスは、susanf@nwtraders.com です。

2.  3.  Exchange サーバーは、nwtraders.com の SPF レコードがあるか DNS に問い合わせます。

4.  5.  nwtraders.com には SPF レコードが存在しないため、メッセージは Sender ID を通過して受信を許可されます。

6.  

![](images/Cc875815.AFSESE05(ja-jp,TechNet.10).gif)

**図 5. Sender ID/SPF レコードがなく、組織に侵入するスパム**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese05_big(ja-jp,technet.10).gif)

Northwind Traders 社が、nwtraders.com DNS ゾーンに SPF レコードを追加すると次のようになります。

1.  スパムを送信している SMTP ホスト、fabrikam.com から Exchange Server 2003 にメッセージが送られます。Sender ID は有効になっています。 送信元のアドレスは、susanf@nwtraders.com です。

2.  3.  Exchange サーバーは、nwtraders.com の SPF レコードがあるか DNS に問い合わせます。

4.  5.  送信している IP アドレス (208.217.184.82) が、SPF で定義された、nwtraders.com からの電子メールの送信を許可されている IP アドレスのリスト (131.107.76.156) に存在しないため、メッセージは Sender ID によって処理されます。

6.  

![](images/Cc875815.AFSESE06(ja-jp,TechNet.10).gif)

**図 6. Sender ID/SPF レコードにより、組織内で認識されるスパム**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese06_big(ja-jp,technet.10).gif)

Sender ID を実装することにより、SPF レコードを持つドメインから送られているようになりすましたスパムを大幅に低減できます。 ただし、Sender ID による保護は、SPF レコードを持つ組織に対してのみ有効である点に注意してください。

Microsoft.com では、接続レベルのフィルタを通過したうちの 59% の受信メッセージが、プロトコルレベルのフィルタでブロックされました。

##### コンテンツレベルの保護

![](images/Cc875815.AFSESE07(ja-jp,TechNet.10).gif)

**図 7. コンテンツレベルの保護**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese07_big(ja-jp,technet.10).gif)

接続レベルおよびプロトコルレベルのフィルタを適用し、受信メッセージがスパムではないかを判断できるようにしたら、次の防御層はメッセージの内容の分析です。ここでは、迷惑メールであることを示すようなスパムに共通の手がかりを捜します。 スパム送信者は、メッセージがコンテンツ フィルタを通過してユーザーの受信トレイに届くことを目的に、スパム検知を回避する新しい方法や工夫をこれまで試みてきました。

###### Exchange インテリジェント メッセージ フィルタ

インテリジェント メッセージ フィルタ (IMF) は、特に Exchange 用に設計されたコンテンツ フィルタです。 このフィルタは Microsoft Research の特許取得済みのマシン ラーニング テクノロジである、Microsoft SmartScreen® テクノロジを基にしています。 SmartScreen は現在、MSN、Microsoft Hotmail®、Microsoft Office Outlook® 2003 および Exchange で使用されています。 IMF は、何百万ものメッセージを基に、正当な電子メール メッセージとスパムの特徴を見分けるように設計されています。 IMF は、受信メッセージが正当なものであるか、またはスパムであるかの可能性を判断します。 他の多くのフィルタリング テクノロジと異なり、IMF は、統計的に信頼できる電子メール メッセージのサンプルから得られる特徴を使用します。 スパムに加え、正当なメッセージのサンプルを組み込むことにより、判断が誤る可能性を減らします。 IMF は、正当なメールと迷惑メール両方の特徴を見分けるため、正確性が向上しています。

IMF は、インターネットからの受信 SMTP メッセージを許可する Exchange サーバーにインストールされます。 IMF がインストールされている Exchange サーバーに、外部のユーザーが電子メール メッセージを送信すると、IMF はメッセージ本文のコンテンツを評価し、各メッセージに対し、そのメッセージがスパムである可能性に基づいてレベルを割り当てます。 このレベルは 1 から 9 まであり、メッセージのプロパティに保存されます。これを SCL (Spam Confidence Level) レベルと言います。 このレベルは、メッセージが他の Exchange サーバーに送信される場合も保持されます。 このプロセス全体を次の図に示します。

![](images/Cc875815.AFSESE08(ja-jp,TechNet.10).gif)

**図 8. Exchange インテリジェント メッセージ フィルタのプロセス**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese08_big(ja-jp,technet.10).gif)

IMF がメッセージに SCL を割り当てると、管理者により設定される 2 つのしきい値に従って次のように評価されます。

1.  **ゲートウェイ ブロッキング設定 : 次の値以上の SCL レベルを持つメッセージをブロックする** メッセージの SCL レベルが設定されたしきい値以上の場合、次のいずれかの処理が実行されます。

    -   保存

    -   
    -   削除

    -   
    -   何もしない

    -   
    -   拒否

    -   

2.  3.  **迷惑メールの保存設定 : Move messages with an SCL rating greater than** メッセージの SCL レベルがこのしきい値を超える場合、このメッセージはユーザーの受信トレイの迷惑メール フォルダに配信されます。ただし、送信者がこのユーザーの差出人セーフ リストに含まれている場合は適用されません。

4.  

###### フィッシング対策

フィッシングとは、ユーザーの身元情報を盗み出すことを目的とした詐欺メールの一種です。 フィッシング詐欺では、アカウント情報の確認を依頼する電子メール メッセージを送るなどの方法でユーザーを信用させ、ユーザーのクレジット カード番号、パスワード、アカウント データなどの貴重な個人情報を開示させようとします。

Exchange Server 2003 SP2 では、IMF にフィッシング対策技術が追加されており、フィッシング メッセージには適切な SCL レベルが付けられて処理されます。

###### カスタムの重み付け

Exchange Server 2003 SP2 には、カスタムの重み付け機能が提供されています。これは、電子メールの本文、件名、あるいはその両方に含まれるフレーズに基づいて、管理者が IMF の動作をカスタマイズできる機能です。

カスタムの重み付け機能を実装するには、MSExchange.UceContentFilter.xml という XML (Extensible Markup Language) ファイルを、IMF がインストールされているサーバーの MSExchange.UceContentFilter.dll および .dat ファイルと同じディレクトリに挿入します。 SMTP 仮想サーバー が起動して IMF が初期化されると、この XML ファイルが読み込まれます。

この XML ファイルは、IMF が重みを付けることができるフレーズを定義します。 この機能を使用して IMF をカスタマイズすることができます。これにより、IMF が付ける SCL レベルとは異なるレベルをフレーズに与え、それに基づいてメッセージを許可または拒否することが可能です。

Microsoft.com の場合、接続レベルおよびプロトコルレベルのフィルタ機能を通過した受信メールの 38% が IMF によってブロックされています。

###### Outlook 2003 および Outlook Web Access を使用した迷惑メール対策

メッセージがサーバーによるスパム対策防御を通過すると、Outlook 2003 クライアントは IMF の迷惑メール保存設定値以上のSCL 値を持ったメッセージを処理します。 このサーバー設定を超えるメッセージは、Outlook 2003 の受信トレイの迷惑メール フォルダに送信されます。

Exchange Server 2003 を使用する Outlook 2003 および Outlook Web Access では、ユーザーは、常に電子メール メッセージを受信したい差出人を指定する差出人セーフ リストを作成できます。また、常に電子メール メッセージを拒否したい差出人を指定する、受信拒否リストの作成も可能です。 メールボックス ストアでは、メッセージに割り当てられている SCL レベルの値にかかわらず、Exchange は差出人セーフ リストに存在する差出人からのメッセージはすべて受信トレイに、受信拒否リストに存在する差出人からのメッセージはすべて迷惑メール フォルダに配信します。 ただし、電子メール メッセージがゲートウェイのしきい値でブロックされた場合、そのメッセージはメールボックス ストアに配信されないため、ユーザーの受信トレイにも配信されません。

[](#mainsection)[ページのトップへ](#mainsection)

### 課題

不要で迷惑な広告メールや、時には攻撃的であったり、詐欺まがいの場合もあるメールが大量に送られてくるスパムは、電子メールを通信や正当な電子商取引のチャネルとして使用する全体的な機能を圧迫しています。

多くの個人や地域で、スパムは非常に大きな問題となっています。正当なビジネスの電子メールはスパムの山に埋もれてしまい、受信トレイは通信を保存する有効な領域ではなくなっています。 中規模ビジネスにおいては、サーバーの消費、ネットワークの消費、およびディスクの使用率という点から見て、スパムはメッセージングのコストを増加させるだけです。

中規模ビジネスにとって、どのように正当な電子メール メッセージを許可し、スパム電子メールをブロックするかが課題となっています。 中規模ビジネスでは、Exchange Server 環境におけるスパム対策が求められています。

Microsoft Exchange Server 2003 SP2 は、スパムを低減するいくつかのフィルタ機能を使用しています。 これらのフィルタ機能は多層化されたスパム対策ソリューションとなっており、この文書で先に簡単に説明したように、接続レベル保護、プロトコルレベル保護およびコンテンツレベル保護で構成されています。 これらのスパム対抗措置は柔軟性があります。 IT 管理者やユーザーは、それぞれのメカニズムを理解すると、スパムに対する保護レベルを調節できるようになり、 中規模ビジネスにおいて、電子メールのアクセスとスパムのフィルタリングとのバランスを取ることが可能になります。

Exchange の管理者および実装担当者が、これらのフィルタ機能それぞれの仕組みと、これらが連携し、ユーザーの受信トレイに届くスパムの数を全体として減らす方法について理解することは重要です。 次の図は、スパムに対する多層防御の仕組みを示しています。

![](images/Cc875815.AFSESE09(ja-jp,TechNet.10).gif)

**図 9. Exchange Server 2003 Anti-Spam Framework**

[画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese09_big(ja-jp,technet.10).gif)

[](#mainsection)[ページのトップへ](#mainsection)

### ソリューション

このセクションでは、中規模ビジネス環境でスパムに対抗するための Microsoft Exchange Server 2003 Anti-Spam Framework ソリューションの評価、開発、展開および管理について説明します。

#### 評価

効果的にスパムに対抗するには、Exchange Server 2003 電子メール システムの全体構成の評価が必要です。これには、どのようなツールが利用可能か、それらのツールの効果的な利用方法といった評価が含まれます。 リスク評価戦略の一部として、環境を詳細に検討する必要があります。

Microsoft Exchange Server 2003 Anti-Spam Framework は、接続フィルタ機能、プロトコルフィルタ機能およびコンテンツフィルタ機能で構成されるスパム対抗措置の集合です。 これらの機能それぞれの仕組みと、相互の連係動作を理解することは非常に重要です。 さらに、ユーザーがこれらの技術をよく理解することによって、実装と管理が成功する可能性が高まります。

次の質問について考慮する必要があります。

1.  Exchange Server 2003 はインストールされていますか?

    Exchange Server 2003 Anti-Spam Framework のスパム対策を利用するには、Exchange Server 2003 が適切な Windows プラットフォームにインストールされている必要があります。

    **注**   Microsoft Exchange Server 2003 は、Windows Server 2003 または Windows 2000 SP3 以降にインストール可能です。 Exchange Server の詳細なインストール要件については、このガイドでは扱っていません。 Microsoft TechNet のトピック「[Exchange Server デプロイメント ガイド](http://technet.microsoft.com/library/bb125074)を参照してください。

2.  3.  Exchange Server には Exchange 2003 SP2 が適用されていますか?

    Exchange Server 2003 SP2 は、次に挙げる改善点により Exchange Server 2003 メッセージング環境を強化する累積的な更新プログラムです。

    -   モバイル電子メールの改善

    -   
    -   メールボックス機能の向上

    -   
    -   スパムに対する保護の強化

    -   

    SP2 は、スパムに対する保護機能を強化し (先にこの文書で説明しています)、安全で信頼性のあるメッセージング環境を実現します。 この機能強化には次のことが含まれます。

    -   Microsoft Research 開発の特許取得済み SmartScreen フィルタ テクノロジを基にした、Exchange インテリジェント メッセージ フィルタの更新および統合

    -   
    -   フィッシングやなりすましを防ぐ、Sender ID 電子メール認証プロトコルを新しくサポート

    -   

4.  5.  既定の SMTP 仮想サーバーが、Exchange システム マネージャで有効になっていますか?

    受信者のフィルタリング、インテリジェント フィルタリング、Sender ID フィルタリングおよび接続フィルタリングはグローバル設定で構成します。また、これらは SMTP レベルで有効にする必要があります。 したがって、これらのサービスに変更を加える前に SMTP が有効になっている必要があります。

6.  7.  クライアント ワークステーションに Outlook 2003 がインストールされていますか?

    サーバーがすべての要件を満たして構成されていても、クライアントの Outlook のバージョンが古い場合は、Microsoft Exchange Server 2003 Anti-Spam Framework が提供するスパム対抗措置を利用できません。

    Exchange Server 2003 およびそのクライアントですべての要件が満たされると、次のスパム対抗措置を利用できます。

    -   接続レベルの保護

        IP 接続フィルタリング

        リアルタイム ブロック リスト

    -   
    -   プロトコルレベルの保護

        受信者および送信者のブロック

        Sender ID

    -   
    -   コンテンツレベルの保護

        Exchange インテリジェント メッセージ フィルタ

        Outlook 2003 および Outlook Web Access を使用した迷惑メール対策

    -   

8.  

#### 開発

「評価」セクションでは、Exchange Server 2003 およびクライアントが Microsoft Exchange Server 2003 Anti-Spam Framework を利用するための要件について、いくつかの質問を挙げ、それに対する答えを示しました。

Exchange 環境でスパムに対抗するソリューションには、クライアントのセキュリティおよびユーザーの教育も含まれます。 Exchange 環境におけるスパム対策には、これらのすべてのアプローチを使用する必要があります。

Microsoft Exchange Server 2003 Anti-Spam Framework が提供するすべてのスパム対策を実装するには、以下の要件を満たす必要があります。

-   Exchange Server 2003 が適切な Windows プラットフォームにインストールされている

-   
-   Outlook 2003 および Outlook Web Access がセットアップおよび構成されている

-   
-   Service Pack 2 などの、推奨される最新の更新プログラムがすべて適用されている

-   

各スパム対策の仕組みと、それぞれの相互の連携についてより深く理解することは、より確実な実装につながります。 先に簡単に説明しましたが、このセクションでは、これらのスパム対策の展開と管理に必要な情報を詳細に解説します。

##### 接続レベルの保護

Exchange Server 2003 SP2 には接続フィルタ機能が含まれます。これは接続しているサーバーの IP アドレスを、拒否する IP アドレスの一覧 (リアルタイム ブロック リストとしても知られています) と比較するものです。 IP アドレスの比較は、SMTP セッションが開始されるとすぐに行われます。これにより、メッセージ送信の最初の段階で、企業のゲートウェイへの接続をブロックすることができます。 つまり、リアルタイム ブロック リストに載っているサーバーからのメッセージの送信が可能になる前に、接続が切断されます。 このアプローチにより、メッセージング層とネットワーク層の両方のパフォーマンスが保護されます。

中規模ビジネスで Exchange Server 2003 SP2 の接続フィルタ機能を確立する場合は、グローバル拒否一覧とグローバル許可一覧を手動で作成するか、またはサードパーティが管理する、ブロックされる既知の IP アドレスのデータベースを使用します。

大部分の Exchange Server 2003 SP2 サーバーは、組織の境界の背後に配置され、インターネットと直接接続していません。 しかしこの位置では、接続フィルタ機能があまり活用されません。この機能は、送信元の IP アドレスを取得して DNS クエリを実行する方法が基になっているからです。 SP2 のリリースにより、送信元の IP アドレスを取得する新しいヘッダー解析アルゴリズムが導入され、この点が解決されました。 接続フィルタ機能を備えた Exchange Server 2003 SP2 は、組織内のどこにでも配置することができ、境界に配置した場合と同様にフィルタリングを実行します。

###### IP 接続フィルタ

組織独自の静的な拒否 IP アドレスの一覧を作成することができます。 グローバル拒否一覧は、その名前が示すように、電子メールを受け取りたくない送信元の IP アドレスおよびネットワークの一覧です。 逆に、グローバル許可一覧を作成することもできます。これは、電子メールのブロックやフィルタリングのポリシーを適用したくない送信元の IP アドレスおよびネットワークの一覧です。 たとえばグローバル許可一覧には、信頼関係が確立されている関連会社や取引先などの IP アドレスを載せます。 信頼関係がある相手からの電子メールの受信が拒否されることがあってはならないため、信頼できる送信者の電子メール サーバーの IP アドレスはグローバル許可一覧に追加します。

###### リアルタイム ブロック リスト

リアルタイム ブロック リストは、スパム発信元と特定された既知の IP アドレスを集めた、DNS を基本としたデータベースです。 リアルタイム ブロック リストは、常にインターネットを監視し、スパムの発信元を突き止めるビジネスを行っている企業により提供されます。 有害な IP アドレスが検出されると、リアルタイム ブロック リストのデータベースに追加されます。 このリストは通常無料で提供されていますが、手数料を支払って拡張サービスを受けられる場合もあります。

Exchange Server 2003 SP2 では、サードパーティが提供するリアルタイム ブロック リストの使用が可能です。 サードパーティのリアルタイム ブロック リストを使用するように構成した場合、Exchange Server 2003 SP2 サーバーは、送信しているサーバーの IP アドレスがそのリアルタイム ブロック リストのデータベースに存在するかを調べ、見つかった場合は接続を拒否します。

リアルタイム ブロック リスト機能は、フィルタリングの基準をメッセージのコンテンツではなく送信元のサーバーの IP アドレスに置いているため、技術的には、サードパーティ製のスパム対策ソフトウェアとは種類が別になります。 リアルタイム ブロック リストは門番のような働きをし、悪意のある、または不審な既知のサーバーからのメッセージが環境に侵入するのを防ぎます。 リアルタイム ブロック リストを通過したメッセージは、ネットワークへの侵入に一歩近づきますが、次の層でインテリジェント メッセージ フィルタなどのメッセージング防御機能によりコンテンツが調べられるまで、ネットワークに入ることはできません。

Microsoft の IT 部門が 1 日に発行するリアルタイム ブロック リスト関連の DNS クエリの量は非常に多いため (数千万)、Microsoft の IT 部門では、リアルタイム ブロック リスト のミラー コピーを、あらかじめ決められた通常のジョブとしてローカルの DNS サーバーに転送しています (通常 1 日に数回)。 多くのリスト プロバイダでは、1 日に 250,000 回を超える大量のクエリのため、リアルタイム ブロック リストのローカル コピーを必要としています。 リアルタイム ブロック リストのコピーの転送は、リスト プロバイダからのゾーン転送として知られています。 Microsoft の IT 部門では、リアルタイム ブロック リスト関連の DNS クエリがこれらのローカル DNS サーバーに対して発行されるように、Exchange Server 2003 SP2 のゲートウェイを構成しています。

##### プロトコルレベルの保護

SMTP メッセージが接続レベルの保護を通過すると、次の防御層は SMTP プロトコル レベルに用意されています。 送信 SMTP ホストと受信 SMTP ホストの間の SMTP ダイアログを分析して、送信者および受信者が許可されているかを確認し、送信者の SMTP ドメイン名を割り出します。

###### 受信者および送信者のブロック

Exchange Server 2003 SP2 の受信者フィルタ機能により、狙いを定めたメール爆弾攻撃からの保護、あるいは攻撃による影響の軽減が可能になります。 このような攻撃の的になる受信者は、インターネットからのメッセージを受け取る必要がまったくない場合も少なくありません。 受信者フィルタは、メッセージの宛先などを基準にして、ゲートウェイ層でメッセージを拒否します。

受信者フィルタ機能は、リアルタイムのスパムの脅威への対策としては、リアルタイムのスパム対策ソリューションほど効果的ではありませんが、メール爆弾攻撃のリスクの低減には極めて有効です。 最近では、受信者フィルタ機能の使用により Microsoft の IT 部門では、数人の受信者宛てに 1 日に送られてくる数百万のメッセージをブロックすることが可能です。

###### Sender ID

Sender ID Framework は、電子メール送信元のドメイン名を検証することによってなりすましやフィッシングの問題に対処する、電子メール認証テクノロジ プロトコルです。 Sender ID は、送信者の IP アドレスを、送信元であるとされるドメインの所有者と照合し、検証することにより、電子メールの送信元を検証します。

Sender ID では、すべての電子メール メッセージに対して、送信元とされるインターネット ドメインから実際に送信されたものであるかどうかを検証しようとします。 この検証は、メールを送信したサーバーのアドレスと、ドメイン所有者が電子メール送信を承認した登録済みのサーバー一覧を照合することによって行われます。 この検証は、電子メール メッセージがユーザーに配信される前に、インターネット サービス プロバイダ (ISP) または受信者のメール サーバーで自動的に実行されます。 この Sender ID の照合結果は、既にメール サーバーで実行しているフィルタリングへの追加入力として使用できます。 送信者が承認済みである場合は、メールを受信者に配信するかどうかを判断する際、通常のコンテンツ フィルタを適用する以外に、過去の行動、トラフィック パターン、送信者の信用が考慮されます。

##### コンテンツレベルの保護

理想としては、スパムは決してクライアント層に届くべきではないと言えます。 しかし現実には、スパムがユーザーのデスクトップ コンピュータまで届くことがあります。 その主な理由の １ つに、ニュースレターなどの正当なメッセージの中にスパムの特徴を持つものも多いことがあります。このため、疑わしいメッセージをすべて削除するようにフィルタリングのしきい値を低く設定することには問題があります。 さらに、ユーザーにはそれぞれの趣味嗜好があり、企業内で使用する単一の設定のセットでは対応しきれないということもあります。

###### Exchange インテリジェント メッセージ フィルタ

受信するインターネット電子メールが最初に通過しなければならないフィルタは、インテリジェント メッセージ フィルタです。これは、メッセージング環境の最も外側に位置する Exchange Server 2003 SP2 ゲートウェイ サーバー上で実行されます。 インテリジェント メッセージ フィルタ は、SCL、PCL (Phishing Confidence Level、最終的な SCL 割り当てを行う際に使用される要素の 1 つ)、および Exchange Server 2003 SP2 に組み込まれている Sender ID Framework を使用します。インテリジェント メッセージ フィルタは、いくつかのメッセージの部分を分類して、経験則に基づくメッセージ分析を行います。次にスキャンした各メッセージに対し、0 から 9 までの SCL レベルを割り当てます。 このレベルの数値が大きいほど、メッセージがスパムである可能性が高くなります。

Exchange Server 2003 SP2 では、インテリジェント メッセージ フィルタに最新のデータおよび更新を取り入れます。 インテリジェント メッセージ フィルタの強化と隔週で行われる更新により、スパムの特定および誤検出の減少に継続的に集中することが可能となっています。 強化には、フィッシング詐欺のブロックなど、スパムに対抗する新しい機能が含まれています。 フィッシング詐欺とは、正当なサイトを装って、機密の個人情報を不正に引き出そうとする行為です。

Exchange Server 2003 SP2 環境は、管理者が設定したしきい値よりも大きい SCL レベルを持つメッセージに対してフィルタリングを実行するように構成することができます。 インテリジェント メッセージ フィルタは、ゲートウェイしきい値と保存時のしきい値の 2 つのしきい値を使用します。これらは Exchange Server 2003 SP2 内で設定されます。

###### Outlook 2003 および Outlook Web Access を使用した迷惑メール対策

-   **迷惑メール フィルタ**。 Outlook 2003 は、Microsoft Research が開発した最先端の技術を用い、複数の要因 (メッセージの送信時刻、メッセージのコンテンツと構造など) を基に、メッセージを迷惑メールとして扱うかどうかを評価します。 このフィルタは、特定の送信者や電子メール メッセージの種類を選び出すものではありません。 高度な分析技術を使い、受信者が迷惑メールと考えるメッセージとの近似性を判断します。

    既定では、最も明らかに迷惑メールとわかるメールが捕捉されるように、フィルタの設定を低くしています。 フィルタによって捕捉されたメッセージは、専用の迷惑メール フォルダに振り分けられ、後でアクセスすることが可能です。 必要な場合、フィルタをより強力にすることができます (この場合、誤って正当なメッセージも捕捉される可能性があります)。また、迷惑メールを受信したら完全に削除するように Outlook 2003 を設定することも可能です。迷惑メール フィルタについては、詳細な説明を参照してください。

-   
-   **差出人セーフ リスト**。 電子メール メッセージがフィルタにより誤って迷惑メールとマークされた場合、そのメッセージの差出人を簡単に差出人セーフ リストに追加することができます。 差出人セーフ リストに載っている電子メール アドレスおよびドメイン名は、メッセージの内容に関係なく、迷惑メールとして扱われません。 連絡先に入っている電子メール アドレスは既定で信頼され、これらの連絡先からの電子メール メッセージは迷惑メールとして扱われません。 組織で Microsoft Exchange Server を 使用している場合、組織内からのメッセージも、迷惑メールとして扱われることはありません。 差出人セーフ リストからのメッセージのみを受信するように Outlook 2003 を構成できます。これにより、受信するメッセージを完全にコントロールできるようになります。

-   
-   **受信拒否リスト**。 特定の電子メール アドレスまたはドメインからのメッセージは、受信拒否リストに差出人を追加すると簡単にブロックできます。 受信拒否リストに載っている送信者またはドメイン名からのメッセージは、メッセージの内容に関係なく、常に迷惑メールとして扱われます。

-   
-   **宛先セーフ リスト**。 自分がメンバーになっているメーリング リストや電子メール グループを、自分の宛先セーフ リストに追加することができます。 このリストに載っている電子メール アドレスやドメイン宛てに送られたメッセージは、送信者やメッセージの内容に関係なく、迷惑メールとして扱われません。

-   
-   **自動更新**。 迷惑メール フィルタは、Microsoft が提供する定期的な更新プログラムによって更新できるため、不要なメッセージをブロックする最新の方法を常に使用することができます。 Microsoft では、迷惑メール フィルタの定期的な更新を行っています。

-   

#### 展開および管理

Microsoft Exchange Server 2003 Anti-Spam Framework の各スパム対策の仕組みと相互の連携をよく理解することが、このフレームワークの基本的な目標です。 このフレームワークの範囲を理解すると、これらのテクノロジの正しい展開および管理により、Microsoft Exchange Server 環境で効果的にスパムに対抗することができます。 スパム対策を強化するには、ユーザーは環境内のクライアント コンピュータを管理するために、スパムの問題についての基本的な知識を身に付ける必要があります。 さらに、インテリジェント メッセージ フィルタ の監視およびトラブルシューティングについて、継続的な管理の一部として説明します。

次の機能はグローバル設定と SMTP レベルの両方で構成する必要があります。 ユーザーの認識については、このセクションの最後に説明します。

このセクションでは次の機能について手順を追って説明しています。

-   接続レベルの保護

    -   IP 接続フィルタリング

    -   
    -   リアルタイム ブロック リスト

    -   

-   
-   プロトコルレベルの保護

    -   受信者および送信者のブロック

    -   
    -   Sender ID

    -   

-   
-   コンテンツレベルの保護

    -   Exchange インテリジェント メッセージ フィルタ

    -   
    -   Outlook 2003 および Outlook Web Access を使用した迷惑メール対策

    -   

-   

##### 接続レベルの保護

Exchange Server 2003 では、リアルタイム ブロック リストを基にした*接続フィルタ機能*をサポートしています。 この機能は、受信している IP アドレスを、フィルタを適用したいカテゴリについて、リアルタイム ブロック リスト (RBL) プロバイダのリストと照合します。 RBL プロバイダのリストに一致するものが見つかると、SMTP は *RCPT TO* コマンドに対し *550 5.x.x* エラーを返します。また、ユーザーが設定したエラー応答が送信元に発行されます。 複数の接続フィルタを使用することができ、各フィルタが適用される順序を設定できます。

接続フィルタを作成する場合、SMTP がサードパーティ RBL サービスによって提供されたリストに対し DNS 参照を実行するために使用するルールを確立します。 接続フィルタは、受信している IP アドレスの 1 つ 1 つを、サードパーティが提供するブロック リストと比較します。 RBL プロバイダは次の 2 つの応答から 1 つを返します。

-   **ホストが見つかりません**。 この応答は、IP アドレスがブロック リストに存在しないことを示します。

-   
-   **127.0.0.x**. この応答は、攻撃者リストの中に一致する IP アドレスが見つかったことを示す応答ステータス コードです。 x の値は、プロバイダによって異なります。

-   

受信している IP アドレスがリストに見つかると、SMTP は *RCPT TO* コマンド (接続しているサーバーが発行する SMTP コマンドで、メッセージの宛先の受信者を特定します) に対する応答として *5.x.x* エラーを返します。

###### リアルタイム ブロック リストのプロバイダ

リアルタイム ブロック リストのプロバイダからは、それぞれ異なる種類のリストやサービスが提供されているため、1 つを選択する前にいくつかのプロバイダを慎重に検討する必要があります。 有名なプロバイダには、[Spam Haus](http://www.spamhaus.org/) および [Spam Cop](http://www.spamcop.net/) の 2 つがあります。

次の質問に対する答えが、RBL プロバイダを選択する際の参考になります。

-   **リストの品質**。 リストに新しく追加された IP アドレスが本当にスパム送信者であるかを誰かが検証するか? 誰でもリストへの追加が可能であるか?

-   
-   **リストの安全性**。 リストは安全性のチェックを通過しているか? 誤って、または故意に追加された IP アドレスが存在しないことを誰かが確認するか?

-   
-   **リスト更新のプロセス**。 見直しのプロセスはどのようになっているか? リストへの追加が自動の場合、スパムの送信が停止したときのリストからの削除も自動的に行われる必要があります。 リスト更新の速度はどの程度か?

-   
-   **リストの転送プロセス**。 プロバイダは、直接 Windows DNS と互換性のある Berkeley Internet Name Domain (BIND) 方式の完全転送または増分転送に対応しているか?

-   
-   **ブロックリスト プロバイダからのサポート**。 プロバイダが提供するサポートのレベルは?

-   

###### IP 接続フィルタ

**IP 接続 フィルタを構成するには**

1.  Exchange システム マネージャから \[グローバル設定\] コンテナを展開します。

2.  3.  \[メッセージ配信\] を右クリックし、\[プロパティ\] をクリックします。

4.  5.  \[接続フィルタ\] タブをクリックします。

6.  7.  \[許可\]、\[拒否\] または\[例外\] の設定を行います。 下の例では \[拒否\] が選択されています。

8.  9.  次のスクリーン ショットに示すように、\[単一の IP アドレス\] または\[複数の IP アドレス\] を選択できます。

    ![](images/Cc875815.AFSESE10(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese10_big(ja-jp,technet.10).gif)

10. 

###### リアルタイム ブロック リスト (RBL)

**リアルタイム ブロック リストの機能をグローバル設定レベルで構成するには**

1.  Exchange システム マネージャから \[グローバル設定\] コンテナを展開します。

2.  3.  \[メッセージ配信\] を右クリックし、\[プロパティ\] をクリックします。

4.  5.  \[接続フィルタ\] タブをクリックします。

6.  7.  接続フィルタのルールを作成には、\[追加\] をクリックします (次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE11(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese11_big(ja-jp,technet.10).gif)

8.  9.  \[表示名\] フィールドに、作成する接続フィルタの名前を入力します。

10. 11. \[プロバイダの DNS サフィックス\] に、プロバイダの DNS サフィックスを入力します (たとえば contoso.com)。

12. 13. 必要な場合、\[返されるカスタム エラー メッセージ\] に、送信元に返すカスタム エラー メッセージを入力できます。 次の既定のエラー メッセージを使用する場合は、このフィールドは空白のままにしてください。

    *&lt;IP アドレス&gt;* は、*&lt;接続フィルタ ルール名&gt;* によってブロックされました

    次の変数を使用して、カスタム メッセージを生成できます。

    -   **%0**。接続している IP アドレス

    -   
    -   **%1**。接続フィルタ処理のルール名

    -   
    -   **%2**。RBL プロバイダ名

    -   

    たとえば、次のようなカスタム メッセージを設定するとします。

    IP アドレス *&lt;IP アドレス&gt;* は、次の RBL プロバイダによってブロックされました *&lt;RBL プロバイダ名&gt;*。

    この場合、\[返されるカスタム エラー メッセージ\] に次のように入力します。

    IP アドレス %0 は、RBL プロバイダ %2 によって拒否されました。

    **注**   Exchange によって %0 は接続している IP アドレスに、%2 はRBL プロバイダに置き換えられます。

14. 15. ブロック リスト プロバイダから受信したどのリターン状態コードをこの接続フィルタで適用するかを構成するには、\[リターン状態コード\] をクリックします。 次のダイアログボックスが表示されます。

    ![](images/Cc875815.AFSESE12(ja-jp,TechNet.10).gif)

16. 17. \[リターン状態コード\] ダイアログ ボックスで、次のいずれかのオプションを選択します。

    -   **すべてのリターン コードにフィルタのルールを適用する**。 この接続フィルタ ルールは、プロバイダ サービスから返されたすべてのリターン状態コードに適用されます。 このルールは、接続フィルタとすべてのリターン状態を照合する既定値を設定します。

        例 :

        **127.0.0.1** ブロック リスト

        **127.0.0.2** 既知のオープン リレー

        **127.0.0.4** ダイヤルアップ IP アドレス

    -   

    <!-- -->

    -   **次のマスクにフィルタのルールを適用する**。 この接続フィルタ ルールは、プロバイダから返されたリターン状態コードをマスクを使用して解釈することにより、これらのコードに適用されます。 プロバイダが使うマスクに従って、フィルタを適用するマスクを入力します。

        例 :

        **0000 | 0001** ブロック リスト

        **0000 | 0010** オープン リレー

        **0000 | 0011** オープン リレー またはブロック リスト

        **0000 | 0100** ダイヤルアップ ホスト

        **0000 | 0101** ダイヤルアップまたはブロック リスト

        **0000 | 0110** ダイヤルアップまたはオープン リレー

        **0000 | 0111** ダイヤルアップ、オープン リレー、またはブロック リスト

    -   

    <!-- -->

    -   **次の応答すべてにフィルタのルールを適用する**。 この接続フィルタ ルールは、プロバイダから特定の値を持つリターン状態コードを受信したときに適用されます。

    -   

18. 19. \[OK\] をクリックします。

20. 

送信者フィルタ、受信者フィルタ、インテリジェント メッセージ フィルタおよび接続フィルタ機能を正しく動作させるためには、これらを SMTP レベルでも適用する必要があります。 適用するには、次の手順に従います。

**フィルタ機能を SMTP レベルで有効にするには**

1.  Exchange システム マネージャを起動します。

2.  3.  \[サーバー\] を展開します。

4.  5.  &lt;サーバー名&gt;******を展開します (構成を行う電子メール サーバー)。

6.  7.  \[プロトコル\] を展開します。

8.  9.  \[SMTP\] を展開します。

10. 11. \[既定の SMTP 仮想サーバー\] を右クリックし、\[プロパティ\] を選択します。

12. 13. \[既定の SMTP 仮想サーバーのプロパティ\] ウインドウで\[詳細設定\] をクリックします。

14. 15. \[詳細設定\] ダイアログ ボックスで \[編集\] をクリックします。

16. 17. \[識別\] ダイアログ ボックスで、\[接続フィルタを適用する\] チェック ボックスをオンにして、以前に設定したフィルタを適用します (下にスクリーン ショットを示します)。

    ![](images/Cc875815.AFSESE13(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese13_big(ja-jp,technet.10).gif)

18. 

#### プロトコルレベルの保護

SMTP メッセージが接続レベルの保護を通過すると、次の防御層は SMTP プロトコル レベルに用意されています。 送信 SMTP ホストと受信 SMTP ホストの間の SMTP ダイアログを分析して、送信者および受信者が許可されているかを確認し、送信者の SMTP ドメイン名を割り出します。

##### 受信者フィルタ

特定の受信者のアドレスに送られるメッセージの配信を防ぐには、受信者のフィルタ機能を使用します。

**受信者のフィルタを構成するには**

1.  Exchange システム マネージャを起動します。

2.  3.  \[グローバル設定\] コンテナを展開します。

4.  5.  \[メッセージ配信\] を右クリックし、\[プロパティ\] を選択します。

6.  7.  \[受信者のフィルタ\] タブをクリックします。

8.  9.  \[ディレクトリに存在しない受信者にフィルタを適用する\] を選択します。

10. 11. \[追加\] をクリックして受信者のアドレスを追加します (次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE14(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese14_big(ja-jp,technet.10).gif)

12. 

##### Sender ID フィルタ

Sender ID の動作を構成するには、Sender ID フィルタ オプションを使用します。 これらのオプションを使用すると、Sender ID 検証が失敗した場合の、サーバーでのメッセージ取り扱い方法を指定できます。 Sender ID 機能は、不要な広告メールやフィッシング詐欺に対する保護を強化する業界標準です。

既定では、 Sender ID フィルタは \[許可\] に設定されています。 ただし Sender ID フィルタは、組織のネットワークの境界の背後で有効にすることもできます。 境界の背後で有効にするには、内部ネットワークにあるサーバーで、Sender ID フィルタから除外するものの IP アドレスを指定します。

**Sender ID フィルタを構成するには**

1.  Exchange システム マネージャを起動します。

2.  3.  \[グローバル設定\] コンテナを展開します。

4.  5.  \[メッセージ配信\] を右クリックし、\[プロパティ\] を選択します。

6.  7.  \[Sender ID Filtering\] タブをクリックします。

8.  9.  希望する Sender ID フィルタ オプションを選択します (次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE15(ja-jp,TechNet.10).gif)

10. 

#### コンテンツレベルの保護

Exchange Server 2003 SP2 のコンテンツ フィルタは、インテリジェント メッセージ フィルタ (IMF) に組み込まれている Microsoft Research の SmartScreen マシン ラーニング テクノロジを使用しています。 インターネットからのメッセージは Exchange SMTP ゲートウェイに到着し、Exchange Server Anti-Spam Framework に入ります。 その前の層の Exchange スパム対策ソリューション (接続、送信者および受信者の各フィルタ) は、実際のメッセージ データを受信する前にメッセージの送信をブロックします。 メッセージがこれらすべての前段階のフィルタを通過すると、メッセージの本文が受信されます。

IMF は、受信した電子メール メッセージが正当なものであるかスパムであるかを正確に評価します。

##### Exchange インテリジェント メッセージ フィルタ

Exchange インテリジェント メッセージ フィルタは、スパムに対抗する非常に重要なコンポーネントです。 SCL との互換性を持ち、サーバー側で、スパムの大量送信への対応に特化して設計された高度なメッセージ フィルタ機能を提供します。 詳細な情報は、「[「Exchange インテリジェント メッセージ フィルタ」](http://technet.microsoft.com/ja-jp/exchange/bb288484) を参照してください。

**Exchange インテリジェント メッセージ フィルタを構成するには**

1.  Exchange システム マネージャを起動します。

2.  3.  \[グローバル設定\] コンテナを展開します。

4.  5.  \[メッセージ配信\] を右クリックし、\[プロパティ\] を選択します。

6.  7.  \[インテリジェント メッセージ フィルタ\] タブをクリックします。

8.  9.  \[次の値以上の SCL レベルを持つメッセージをブロックする\] (次のスクリーン ショット参照) で、希望する評価付けレベルを選択します。

    SCL レベルは 0 から 9 まであります。レベルが高いほどメッセージがスパムである可能性が高くなります。

    ![](images/Cc875815.AFSESE16(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese16_big(ja-jp,technet.10).gif)

10. 

##### Outlook 2003 および Outlook Web Access を使用した迷惑メール対策

Outlook 2003 および Outlook Web Access 2003 には、いずれにもユーザーをスパムから保護する機能が含まれています。 これらの機能には次のものがあります。

-   **ユーザーが保守するブロック リストとセーフ リスト**。 Outlook 2003 および Outlook Web Access で使われるブロック リストとセーフ リストは、ユーザーのメールボックスに保存されます。 どちらのクライアント プログラムも同じリストを使用するため、ユーザーは 2 つのバージョンを保守する必要はありません。

-   
-   **外部コンテンツのブロック**。 Outlook 2003 および Outlook Web Access 2003 では、迷惑メールの送信者がビーコンを使って電子メール アドレスを取得することがより困難になっています。 ビーコンとして使われる恐れのあるコンテンツを含んだメッセージを受信すると、Outlook および Outlook Web Access は、実際にビーコンを含んでいるかどうかに関係なく警告メッセージを表示します。 メッセージが正当なものであるとわかっている場合は、警告メッセージをクリックしてコンテンツをダウンロードできます。 正当なものであるかどうか確信が持てない場合は、迷惑メールの送信者に通知を送るビーコンを起動せずにそのメッセージを削除できます。

-   
-   **迷惑メール管理の改善**。 Outlook 2003 では、ユーザーは電子メール メッセージで特定のフレーズを検索するルールを作成して、これらのフレーズを含むメッセージを自動的に受信トレイから指定したフォルダ (迷惑メール フォルダや削除済みアイテム フォルダ) に移動させることができます。 また、指定したフォルダに移動する代わりに、迷惑メールの疑いがあるメッセージを完全に削除することもできます。

-   
-   **迷惑メール フィルタ**。 Outlook 2003 には、一般的なスパムの特性を検索する迷惑メール フィルタが含まれています (これらの特性は、Office のアップデートと同時に更新されます)。 スパムの疑いのある各特性について、Outlook はカウンタの値を増やします。 メールのある部分について、このカウンタの値が大きくなるほど、スパムである可能性が高くなります。 迷惑メールからの保護レベルは、\[迷惑メールのオプション\] ダイアログ ボックスで構成します。

-   

**Outlook 2003 の迷惑メール フィルタを構成するには**

1.  Outlook 2003 のメニュー バーから、\[アクション\] をクリックします。

2.  3.  \[迷惑メール\]、\[迷惑メールのオプション\] の順に選択します(次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE17(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese17_big(ja-jp,technet.10).gif)

4.  5.  下のスクリーン ショットのダイアログ ボックスが表示されます。このダイアログ ボックスで、迷惑メールからの保護レベルを選択できます。

    ![](images/Cc875815.AFSESE18(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese18_big(ja-jp,technet.10).gif)

6.  

**Outlook Web Access (OWA) で迷惑メール フィルタを構成するには**

1.  Outlook Web Access アカウントにログインします。

2.  3.  \[オプション\] を選択します。

4.  5.  \[迷惑メール リストの管理\] をクリックします。

6.  7.  \[リストの表示または変更\] から適切な機能を選択します (次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE19(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese19_big(ja-jp,technet.10).gif)

8.  9.  送信者の電子メールアドレスを追加、編集または削除します。

10. 

**注**   初めてこれらの迷惑メール管理機能を使用する場合、またはオプションを変更した場合は、受信トレイから削除されたメッセージを定期的に調べて、正当なメッセージが移動されていないか確認してください。 Outlook 2003 の迷惑メール管理機能の更新は、「[ダウンロードのホームページ](http://office.microsoft.com/ja-jp/downloads/default.aspx)」の \[Office Update\] に掲載されています。

#### インテリジェント メッセージ フィルタの監視とトラブルシューティング

Microsoft Exchange インテリジェント メッセージ フィルタの監視とトラブルシューティングは、イベント ビューアおよびシステム モニタを使用して行うことができます。 このセクションでは、監視およびトラブルシューティングの方法を手順を追って説明します。

##### イベント ビューアを使用する

イベント ビューアのアプリケーション ログとシステム ログに、Exchange、SMTP サービスやその他のアプリケーションの動作に関連したエラー、警告および情報イベントが表示されます。 インテリジェント メッセージ フィルタにの問題の原因を特定するには、アプリケーション ログとシステム ログに含まれているデータを慎重に検討します。 インテリジェント メッセージ フィルタは、ソースを MSExchangeTransport、カテゴリを SMTP プロトコルとしてイベント ビューアにイベントを書き込みます。

**イベント ビューアを使用してインテリジェント メッセージ フィルタのイベントを見つけるには**

1.  \[スタート\] ボタンをクリックし、\[すべてのプログラム\]、\[管理ツール\] の順にポイントし、\[イベントビューア\] をクリックします。

2.  3.  コンソール ツリーで \[アプリケーション ログ\] をクリックします。

4.  5.  ログをアルファベット順に並べ替えてすばやく Exchange サービス のエントリを見つけるには、詳細ペインの \[ソース\] をクリックします (次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE20(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese20_big(ja-jp,technet.10).gif)

6.  7.  フィルタを使用して、インテリジェント メッセージ フィルタに関するイベント ログのエントリのみを一覧表示するには、\[表示\] メニューの \[フィルタ\] をクリックします。

8.  9.  \[アプリケーション ログのプロパティ\] で、\[イベント ソース\] の一覧から MSExchangeTransportを選択します。

10. 11. \[分類\] の一覧から SMTPプロトコルを選択します。

12. 

##### システム モニタおよびパフォーマンスのログと警告を使用する

インテリジェント メッセージ フィルタにはいくつかのパフォーマンス カウンタがあり、パフォーマンスと動作の監視に使用できます。

**システム モニタおよびパフォーマンス ログと警告を使用するには**

1.  \[スタート\] ボタンをクリックし、\[すべてのプログラム\]、\[管理ツール\] の順にポイントし、\[パフォーマンス\] をクリックします。

2.  3.  \[システム モニタ\] を選択し、**+** ボタンをクリックしてカウンタを追加します。

4.  5.  \[カウンタの追加\] ダイアログ ボックスの \[パフォーマンス オブジェクト\] で、\[MSExchange インテリジェント メッセージ フィルタ\] を選択します (次のスクリーン ショット参照)。

    ![](images/Cc875815.AFSESE21(ja-jp,TechNet.10).gif)

    [画像を画面全体に表示](https://technet.microsoft.com/ja-jp/cc875815.afsese21_big(ja-jp,technet.10).gif)

6.  

#### ユーザーの認識

ウイルス対策、不正ユーザーからのワークステーションの保護、スパムへの対処など、どの問題にしても、テクノロジだけで脅威や攻撃から完全に防御できるわけではありません。 ユーザーを教育すれば、スパム管理においてユーザーは重要な役割を果たします。 ユーザーの Outlook 環境で不要な電子メールを受け取らないようにしたりフィルタで除外する方法について、ユーザーを教育する必要があります。

この教育とは、次のようなものです。  

-   財務情報や個人情報を要求する電子メールには絶対に返信しない。

-   
-   パスワードは絶対に教えない。

-   
-   疑わしい電子メールの添付ファイルは開かない。

-   
-   疑わしい電子メールまたは不要な電子メールには返信しない。

-   
-   この文書の「Outlook 2003 および Outlook Web Access を使用した迷惑メール対策」セクションで説明されている Outlook 2003 の迷惑メール オプションを構成する。

[](#mainsection)[ページのトップへ](#mainsection)

### 概要

多くの中規模ビジネスでは、数多くの重要なビジネス プロセスを Microsoft Exchange Server 2003 の機能を使用して構築しています。毎日の業務の多くで、Exchange Server が提供するサービスが利用されています。

迷惑メールの増加への対応が、中規模ビジネスにとっての課題になっています。 スパムは迷惑なだけではなく、ネットワークの負担となり、時間、費用、およびその他の個人やビジネスのリソースを浪費させます。これは世界規模の問題となっています。

この文書では、Exchange Server 2003 環境でスパムを減少させる方法があることを説明してきました。 Exchange Server 2003 Anti-Spam Framework はスパムに対する複数の保護アプローチを組み合わせたもので、管理者およびエンド ユーザーに十分な柔軟性を提供し、不要な電子メールの削減と生産性レベル向上に役立ちます。

[](#mainsection)[ページのトップへ](#mainsection)

### 参照情報

Microsoft ダウンロード センターから「[Microsoft Exchange Server 2003 Anti-Spam Framework Overview](http://download.microsoft.com/download/0/e/6/0e6a7113-dda4-4fd7-aaba-b9e264700225/anti-spam.doc)」(英語) をダウンロードできます。

「Exchange Server 2003 SP2 Overview」内に「[Better Protection Against Spam](http://www.microsoft.com/exchange/evaluation/sp2/overview.mspx)」(英語) というトピックが掲載されています。

「[Exchange インテリジェント メッセージ フィルタ](http://www.microsoft.com/technet/prodtechnol/exchange/downloads/2003/imf/default.mspx)」(IMF) および IMF の更新についての情報が、Microsoft TechNet に掲載されています (英語)。

ホワイト ペーパー「[メッセージングにおける Microsoft の防御対策 : スパムやウイルス、および電子メール攻撃に対する Microsoft IT 部門の防御対策](https://technet.microsoft.com/ja-jp/library/f9cd7348-50e6-4309-aaf7-7dc1629f4ccb(v=TechNet.10))」が Microsoft TechNet に掲載されています。

「[「Exchange Server 2003 リアルタイム ブロック リスト」](http://technet.microsoft.com/ja-jp/library/aa996146) が Microsoft TechNet に掲載されています。

「[Exchange 2003 で接続フィルタを構成してリアルタイム ブロック リスト (RBL) を使用する方法と受信者フィルタを構成する方法](http://support.microsoft.com/kb/823866/ja)」がマイクロソフト サポート技術情報に掲載されています。

[](#mainsection)[ページのトップへ](#mainsection)
