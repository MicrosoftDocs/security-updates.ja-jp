---
TOCTitle: 'MS00-078'
Title: 'マイクロソフト セキュリティ情報 MS00-078 - 緊急'
ms:assetid: 'ms00-078'
ms:contentKeyID: 61228244
ms:mtpsurl: 'https://technet.microsoft.com/ja-JP/library/ms00-078(v=Security.10)'
---

Security Bulletin

マイクロソフト セキュリティ情報 MS00-078 - 緊急
===============================================

「Web サーバー フォルダへの侵入」 の脆弱性に対する対策
------------------------------------------------------

公開日: 2000年10月20日 | 最終更新日: 2000年10月30日

#### 概要 :

Microsoft は、Microsoft® IIS 4.0 および 5.0 の脆弱性を排除する更新プログラムをリリースしました。この脆弱性により、Web サイトの訪問者は、Web サイトに対し、プログラムの実行を含めた、幅広い破壊的な操作を行うことが可能になります。
この脆弱性は、Microsoft セキュリティ情報 MS00-057 で説明している更新プログラムによって排除することができます。この更新プログラムを適用済みの場合、この脆弱性による攻撃を受けることはありません。したがって、ほかに対策を講じる必要はありません。Microsoft では、IIS 4.0 または 5.0 を使用中で、かつ、この更新プログラムを適用していないユーザーに対し、直ちに更新プログラムを適用することを強くお勧めします。

**影響を受けるソフトウェアのバージョン** **:**

-   Microsoft IIS 4.0
-   Microsoft IIS 5.0

### 詳細

問題
----

<span></span>
IIS 4.0 および 5.0 における正規化 (canonicalization) エラーにより、特定の種類の誤った URL が、Web フォルダを含む論理ドライブ上のいずれかのファイルやフォルダへのアクセスに使用される場合があります。この結果、Web サイトを訪問した悪意のあるユーザーは、そのコンピュータのほかの権限を取得できる場合があります。この脆弱性は、ローカルでログオンしたユーザーの権限に対応した権限を取得するのに特に使用されます。こうした権限を取得することにより、悪意のあるユーザーは、データの追加、変更、削除を行ったり、既にサーバーに存在するコードを実行したり、サーバーに新しいコードをアップロードして実行したりすることが可能になります。
Web サーバーに対する要求は、IIS の匿名ユーザー アカウントである、「IUSR\_コンピュータ名」アカウントのセキュリティ コンテキストで処理されます。Web フォルダ内では、このアカウントには、信頼されないユーザーに対応する権限しか付与されていません。しかし、このアカウントは Everyone および Users グループのメンバーであるため、悪意のあるユーザーが Web フォルダ以外のファイルにアクセスできる可能性が大幅に増えます。デフォルトでは、こうしたグループには、オペレーティング システムのほとんどのコマンドを実行する権限が付与されており、この結果、悪意のあるユーザーは、広範な損害を引き起こすことが可能になります。ユーザーが、サーバー上の匿名ユーザー アカウントの権限から Everyone および Users グループを事前に削除していた場合、あるいはオペレーティング システムとは異なるドライブに Web フォルダをホストしている場合、この脆弱性による攻撃を受ける可能性は大幅に減少します。
Microsoft では、IIS 4.0 または 5.0 を使用しているすべてのユーザーに対し、この脆弱性の更新プログラムを直ちに適用することを強くお勧めします。この更新プログラムは、元々は、全く別の脆弱性 (Microsoft セキュリティ情報 MS00-057 に掲載) を修正するために、2000 年 8 月にリリースされたものです。既にこの更新プログラムを適用している場合は、新たな対応策を講じる必要はありません。

よく寄せられる質問
------------------

<span></span>
**マイクロソフト セキュリティ情報** **MS00-078** **はどのような内容の通知ですか?**

このマイクロソフト セキュリティ情報 MS00-078 は、Microsoft® Internet Information Server のセキュリティ上の脆弱性を排除する更新プログラムがリリースされたことを、お客様にお知らせするものです。マイクロソフトでは、お客様の情報の保護に全力を挙げて努めております。この通知で、お客様に脆弱性の詳細とその対策をお知らせします。

**この脆弱性はどれくらいの範囲に影響を与えますか?**

悪意のあるユーザーが、このセキュリティ上の脆弱性により、影響を及ぼされた Web サーバーで自分の選択によるコードを実行できる可能性があります。この悪意あるユーザーが動作することができる特定のコードは特定のサーバー設定のため限られるでしょうが、多くの場合、対話的にサーバーにログインしたユーザーが動作可能ないかなるコードでも実行できてしまう可能性があります。このため悪意のあるユーザーによるコードのインストールや実行、ファイルや Web ページの追加、変更、削除やその他の操作が可能となってしまいます。これは深刻な脆弱性であり、マイクロソフトは IIS 4.0 または 5.0 をご使用になっている全てのお客様にご自分のシステムを保護するための処置を早急に行うことを強く推奨します。
別の脆弱性のために 2000 年 8 月にリリースされた更新プログラムはこの脆弱性にもいろいろな要素を含んだ保護を提供しており、これをすでにインストールされたお客様は他の処置を行う必要はありません。またこの脆弱性により取得された特権はローカルでログオンしたユーザーのもので管理者のものではないことを理解することが重要です。つまり、管理者がシステムでの非管理者ユーザーの権限を事前に制限していた場合、この脆弱性に対する危険性は著しく減少します。

**すでにこの脆弱性を排除する更新プログラムが入手可能であるのに、なぜ新たに通知を出すのですか?**

それには 2 つの理由があります。
お客様に新たに発生した脆弱性とそれが原因となるリスクを警告するためです。
まだ更新プログラムを適用されていないお客様に早急に対処していただくためです。

**なぜ** **MS00-057** **でさらに深刻な脆弱性について説明しなかったのですか?**

この新たな脆弱性は最近になって認識されました。「ファイル許可の正規化(cannonicalization)」に関する脆弱性とこの脆弱性には共通のソリューションがありますが、それぞれ異なる原因と構造があり、あらゆる点で別の脆弱性なのです。

**この脆弱性の原因は何ですか?**

IIS が Web フォルダ構造を含む論理ドライブにある要求されたフォルダに IIS がナビゲートされたり、その中にあるファイルにアクセスする原因となる URL の構成が可能であるためこの脆弱性が起こります。

**「要求されたフォルダにナビゲートされる」とはどういう意味ですか?**

Windows NT® 4.0 と IIS 4.0 をマシンにインストールし、デフォルト設定で使用しているとしましょう。この場合、システム ソフトウェア と Web ファイルは C ドライブのいろいろなフォルダに存在しています。ほとんどのシステム ファイルが C:\\WINNT\\system にあり、Web フォルダは C:\\inetpub に存在します。
Web サーバーの主なセキュリティ機能の 1 つはユーザー リクエストを制限することで、これによりユーザーは Web フォルダ内のファイルにしかアクセスできません。つまり、 Web フォルダが C:\\inetpub にある場合、ユーザーがC:\\inetpub の外に存在しているファイルにアクセスする URL を作成することは不可能です。しかし、この脆弱性により、それが可能となってしまいました。特に悪意のあるユーザーが、名前や位置を自分が知っているファイルにアクセスできる Web サイトや Web フォルダと同じ論理ドライブにある Web サイトへの URL を作成してしまう可能性があります。

**悪意のあるユーザーはこの脆弱性を利用してどのようなことができますか?**

悪意のあるユーザーがリクエストする特定のファイルに対するアクセス権によります。ファイルを読むことが許可される場合、悪意のあるユーザーがそのファイルを読む可能性があります。書き込みのアクセス権がある場合は、そのファイルの変更ができます。実行可能なファイルを動作できるアクセス権がある場合は、そのファイルを動作し、サーバーで実行することができます。しかし、この脆弱性により、ファイル許可を避ける方法は提供しません。

**Web** **サーバーには通常、どのような実行可能なファイルがあるのですか?**

オペレーティング システム ファイル自体はたくさんの危険をもたらす場合があります。ユーザーはデフォルト アクセス権で実質的にはどのようなオペレーティング システム コマンドを実行することができるので、いろいろな損害を起こす原因ともなります。たとえばサーバーで新規ファイルの作成や、既存ファイルの削除、またハード ドライブ全体を再フォーマットすることもできます。
しかし、これだけではありません。サーバーにあるコードの誤用や悪用もありえます。オペレーティング システム コマンドへのアクセスで、マシンに悪意のあるユーザーが選択したコードをアップロードし、それを実行することもできます。

**どのセキュリティ コンテキストでファイル アクセスが行われるのですか?**

ファイルアクセスは組み込み 「IUSR\_コンピュータ名」 アカウントのセキュリティ コンテキストで行われます。これはサイトへの認証されていない訪問者に代わり Web 上での操作を行うアカウントです。通常、そのアカウントはサイト訪問者の全般的な使用目的に適切である操作に対する許可しか持っていません。
この脆弱性により、ユーザーが Web フォルダから抜け出し、ドライブの他のどこかにあるファイルにアクセスが可能になることに危険があります。デフォルトで、これらの多くのファイルが Everyone グループや User グループ、またはその両方にアクセスを供給します。Everyone グループと User グループはメンバーとして「IUSR\_コンピュータ名」アカウントを持っています。この脆弱性は有効的にローカルでマシンにログオンできるユーザーが通常持っている権限を悪意あるユーザーにも与える可能性があります。

**この脆弱性は悪意のあるユーザーにマシンに対する完全なコントロールを与えてしまうのですか?**

いいえ、与えません。この脆弱性自体により、悪意のあるユーザーが「IUSR\_コンピュータ名」アカウントのコンテキストで何か操作が可能になることもありますが、このアカウント自体は重要なファイルの中のいくつかにはアクセスがありません。
1 つだけ例をあげると、winnt\\repair フォルダにあるシステム ファイルのバックアップ コピーはセキュリティ アカウント マネージャ ファイル (sam.\_) を含んでいて、管理者のみがアクセス可能です。ですのでこの脆弱性により悪意あるユーザーがマシンに対する完全なコントロールを得ることはありません。同様に、Windows® 2000 のデフォルト アクセス権は Windows NT 4.0 よりもさらに制限が多いため、影響は少なくなります。
しかし、悪意のあるユーザーが引き起こす可能性のある損害を過小評価してはいけません。これらの権限でさえも、悪意のあるユーザーが大きな損害を引き起こす原因を阻止できるとは限りません。さらに、この脆弱性で悪意のあるユーザーはまた別の攻撃をどこから行うかを決める足がかりをつかみ、さらに別の権限を得ようとするかもしれません。たとえば、他の公開されている脆弱性を利用する悪意あるコードをアップロードし、乱用する可能性もあります。

**この脆弱性に他の制限はありますか?**

はい。あります。この脆弱性でファイルが Web フォルダと同じ論理ドライブにある場合だけ、そのファイルはアクセス可能となります。たとえば、Web 管理者がオペレーティング システム ファイルが C ドライブにインストールされ、Web フォルダが D ドライブにインストールされるように、サーバーを設定したとします。この場合、悪意のあるユーザーはこの脆弱性を利用してオペレーティング システム ファイル にアクセスすることはできません。
サーバー自体の論理ドライブの Web フォルダをホストするように設定されたサーバーはこの脆弱性による危険が一番少ないでしょう。しかしこの場合でも、サンプル Web アプリケーションなど、Web フォルダに悪用される可能性のあるファイルがないようにして下さい。

**管理者は自分のサーバーでこの脆弱性が誰かに悪用されていることが分かりますか?**

はい。分かります。IIS イベント ログは、誰かがこの脆弱性を悪用しようとした場合、それを示す情報を提供します。ストリング　"/../" がどこかに含まれる URL を伴う成功した GET リクエストをイベント ログ内で検索して下さい。このようなリクエストはデザインにより、決して成功しませんので、それが成功していた場合、これは誰かが脆弱性を悪用したということです。次に URL が何にマップしているかを見て下さい。データ ファイルにマップしている場合、攻撃者がそれを読んだ可能性があります。それが実行可能なファイルにマップしている場合、攻撃者によりそれが実行された恐れがあります。

**このような脆弱性が原因となる危険を削減するよい方法はありますか?**

はい。あります。いわゆる「ディレクトリ トラバーサル」の脆弱性による危険のため、web サーバーをセットアップする時に防御策をとるとよいでしょう。これについては[セキュリティ チェックリスト IIS 4.0](http://www.microsoft.com/japan/technet/archive/security/chklist/iis4cl.mspx) および [5.0](http://www.microsoft.com/japan/technet/prodtechnol/windows2000serv/technologies/iis/tips/iis5chk.mspx) で解説してあります。また以下についても説明しています

1.  システム ドライブ以外のドライブに web フォルダをインストールする
2.  サイトからすべてのサンプル ファイルと不要な特徴を削除する
3.  攻撃者の利点となる可能性のあるコマンド ライン ユーティリティを移動、名前の変更、削除し、それらに限定的なアクセス権を設定する
4.  「iusr\_コンピュータ名」アカウントがシステムのどのファイルにも書き込みアクセスがないことを確認する

**だれが更新プログラムを適用する必要がありますか?**

マイクロソフトは IIS 4.0 か IIS 5.0 を使用している全てのお客様にこの脆弱性に対する更新プログラムを直ちに適用することを強く推奨します。[マイクロソフト セキュリティ情報 MS00-057](http://technet.microsoft.com/security/bulletin/ms00-057) の一部としてリリースされた更新プログラムをすでにインストールされたお客さまは新たな対応策を講じる必要はありません。

**更新プログラムは何を修正するのですか?**

この更新プログラムは誤った URL を無効として扱うことによりこの脆弱性を排除します。これは正しい動作です。

**どこから更新プログラムを入手できますか?**

マイクロソフト セキュリティ情報 MS00-078 をご覧ください。

**更新プログラムはどのように使用するのですか?**

サポート技術情報 [276489](http://support.microsoft.com/kb/276489) には、お客様のサイトに更新プログラムを提供するための詳細な情報が記載されています。

**この問題に対してマイクロソフトはどのような対応をしていますか?**

-   マイクロソフトは、この脆弱性を排除する更新プログラムを開発しました。
-   マイクロソフトは、セキュリティ上の脆弱性の詳細とその対策をお客様にご理解いただくために、セキュリティ情報 MS00-078 と、この faq を提供しています。
-   マイクロソフトは、マイクロソフト社の最新のセキュリティ情報を無料でご購読いただける[マイクロソフト プロダクト セキュリティ 警告サービス](http://technet.microsoft.com/ja-jp/security/dd252948.aspx) にて、購読の登録をされているお客様に、セキュリティ情報の通知を行っています。
-   マイクロソフトはサポート技術情報 [276489](http://support.microsoft.com/kb/276489) を公開し、このセキュリティ上の脆弱性と更新プログラムの詳細と説明しています。

**推奨するセキュリティ設定の詳細情報は、どこで入手できますか?**

マイクロソフトが提供するセキュリティ情報の詳細は、弊社の[セキュリティ](http://technet.microsoft.com/ja-jp/security/default.aspx)の Web サイトから入手してください。

**この問題のテクニカル サポートを受けるには、どこに問い合わせればよいですか?**

マイクロソフトの製品に関するテクニカルサポートは、[電話番号とサポートオプションのサイト](http://support.microsoft.com/gp/cntactms)を参照してください。

更新プログラム
--------------

<span></span>
この問題に対する日本語版更新プログラムは、次のサイトからダウンロードできます。

-   Microsoft IIS 4.0:
    この問題に対する更新プログラムは Windows NT 4.0 のセキュリティ ロールアップ パッケージ (SRP) に含まれています。
    個別の更新プログラムよりもセキュリティ ロールアップ パッケージを適用することをお勧めします。
    NT 4.0 のセキュリティ ロールアップ パッケージは次のリンクから入手してください。

    [299444](http://support.microsoft.com/kb/299444) Post Windows NT 4.0 SP6a セキュリティ ロールアップ パッケージ (SRP)

    なお、個別の更新プログラムは次のリンクから入手することができます。
    <http://support.microsoft.com/kb/269862>

-   Microsoft IIS 5.0:
    この問題に対する修正は [MS01-026](http://technet.microsoft.com/security/bulletin/ms01-026) の修正モジュールに含まれています(NEC PC98 シリーズを除く)。MS01-026 には、それまでの IIS 関連の修正がすべて含まれていますので、MS01-026 のご利用をお勧めします。
    また、Windows 2000 の場合、この問題に対する修正は Windows 2000 Service Pack 2 以降に含まれております。最新の Windows 2000 Service Pack については次のリンクから入手してください。
    [http://www.microsoft.com/downloads/details.aspx?FamilyID=dc27b8c6-2a5a-4399-ad3d-4a97a25f41d9&DisplayLang=ja](http://www.microsoft.com/downloads/details.aspx?familyid=dc27b8c6-2a5a-4399-ad3d-4a97a25f41d9&displaylang=ja)
    個別の日本語版更新プログラムは下記のサイトからダウンロードできます。
    <http://support.microsoft.com/kb/269862>

注意:
IIS 4.0 環境に本修正モジュールを適用するには、Windows NT 4.0 Service Pack 5 以上の環境が必要です。
Window NT 4.0 OptionPack のインストール後、Service Pack の再適用をされていない場合は、バージョンの不整合により予期せぬ問題が発生する場合があります。
Windows NT 4.0 OptionPack のインストール後に、Service Pack の再適用をされていない場合は、Windows NT 4.0 Service Pack 5 以上の再適用を行ってから、本修正モジュールを適用してください。

更新プログラムについてのご質問は、マイクロソフト プロダクト サポート までご連絡ください。マイクロソフトでは、ご質問の内容が弊社製品の不具合が原因の場合、サポート料金はいただきません。それ以外の場合には、サポート料金を請求させていただきますのでご注意ください。
[マイクロソフト プロダクト サポートへの連絡方法はこちらをご覧ください。](http://www.microsoft.com/japan/security/support/patchqa.mspx)

### その他の情報

**詳細情報** **:**

-   US マイクロソフトセキュリティ情報（MS00-078）
    [http://www.microsoft.com/technet/security/bulletin/ms00-078.mspx](http://technet.microsoft.com/security/bulletin/ms00-078)
-   サポート技術情報 （KB） 文書番号 ： 276489
    [Web サーバー フォルダへの侵入の脆弱性を解決する更新プログラム](http://support.microsoft.com/kb/276489)

本セキュリティ情報に含まれている情報は、いかなる保証もない現状ベースで提供されるものです。Microsoft Corporation 及びその関連会社は、市場性および特定の目的への適合性を含めて、明示的にも黙示的にも、一切の保証をいたしません。さらに、Microsoft Corporation 及びその関連会社は、本文書に含まれている情報の使用及び使用結果につき、正確性、真実性等、いかなる表明・保証も行ないません。Microsoft Corporation、その関連会社及びこれらの権限ある代理人による口頭または書面による一切の情報提供またはアドバイスは、保証を意味するものではなく、かつ上記免責条項の範囲を狭めるものではありません。Microsoft Corporation、その関連会社 及びこれらの者の供給者は、直接的、間接的、偶発的、結果的損害、逸失利益、懲罰的損害、または特別損害を含む全ての損害に対して、状況のいかんを問わず一切責任を負いません。（Microsoft Corporation、その関連会社 またはこれらの者の供給者がかかる損害の発生可能性を了知している場合を含みます。) 結果的損害または偶発的損害に対する責任の免除または制限を認めていない地域においては、上記制限が適用されない場合があります。

*Built at 2014-04-18T01:50:00Z-07:00*
