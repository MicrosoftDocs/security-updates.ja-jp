---
TOCTitle: 'MS01-043'
Title: 'マイクロソフト セキュリティ情報 MS01-043 - 緊急'
ms:assetid: 'ms01-043'
ms:contentKeyID: 61228408
ms:mtpsurl: 'https://technet.microsoft.com/ja-JP/library/ms01-043(v=Security.10)'
---


マイクロソフト セキュリティ情報 MS01-043 - 緊急
===============================================

NNTP サービスでメモリ リークが発生する
--------------------------------------

公開日: 2001年8月15日 | 最終更新日: 2001年9月4日

#### 概要 :

**このセキュリティ情報の対象となるユーザー:**  
Microsoft® Windows NT® 4.0、Windows® 2000 または Exchange 2000 で、ニュースグループ サービスを提供しているシステム管理者

**脆弱性の影響 :**  
サービス拒否

**推奨する対応策:**  
システム管理者は直ちに影響を受けるシステムにこの更新プログラムを適用して下さい。

**影響を受けるソフトウェア:**  

-   Microsoft Windows NT 4.0
-   Microsoft Windows 2000
-   Microsoft Exchange 2000

### 詳細

問題
----


**技術的な説明:**  
Windows NT 4.0、Windows 2000、および Exchange 2000 の NNTP (Network News Transport Protocol) サービスはニュースの投稿を処理するルーチンでメモリ リークが発生します。特定の構成を含む投稿が処理されるごとに、このメモリ リークが原因となり、少量のメモリが利用できなくなります。攻撃者が大量の投稿を送信した場合、サーバーのメモリが使い果たされ、通常のサービスが中断します。該当するサーバーは、IISAdmin サービスを再起動することにより、通常のサービスを回復することができます。

Exchange 5.5 は NNTP サービスを含んでいますが、この脆弱性の影響は受けません。Exchange 2000 は別個の NNTP サービスを同梱していません。NNTP が有効にされている場合、標準の Windows 2000 NNTP サービスが使用されます。このため、NNTP サービスを提供している Exchange 2000 サーバーは Windows 2000 用の更新プログラムを適用する必要があります。

**問題を緩和する要素:**  

-   Windows NT 4.0 そのものには NNTP サービスは含まれていません。Windows NT 4.0 Option Pack の一部としてインストールする必要があります。(既定では Option Pack の一部としてインストールされません。)
-   Windows 2000 Professional そのものには NNTP サービスは含まれていません。
-   Windows 2000 サーバー製品には NNTP サービスが含まれていますが、既定ではインストールされません。
-   この脆弱性を利用して、攻撃者はマシンの管理機能を獲得したり、マシン上のデータを改ざんすることはできません。

**脆弱性識別番号:**  
[CAN-2001-0543](http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=can-2001-0543)

**テストしたバージョン:**  
マイクロソフトは Windows NT 4.0、Windows 2000、Exchange 5.5 および Exchange 2000 のテストを行い、これらの脆弱性による影響を評価しました。それより前のバージョンに関しては[サポート](http://support.microsoft.com/lifecycle/)しておらず、この脆弱性による影響は不明です。

よく寄せられる質問
------------------


**どのようなことが起こる可能性がありますか?**

これは[サービス拒否](http://www.microsoft.com/japan/security/glossary.mspx)の脆弱性です。該当するサーバーにニュース投稿を繰り返し送信することにより、攻撃者がそのサーバーの性能を低下させ、サーバーが有益なサービスを提供できなくなる可能性があります。

この脆弱性によって、攻撃者はサーバー上のデータを改ざんしたり、マシンの管理機能を獲得することはできません。該当するシステムの管理者は影響を受けているシステムのサービスを再起動して、通常のサービスを回復して下さい。

**何が原因で起こりますか?**

この脆弱性は Windows NT 4.0 および Windows 2000 の NNTP サービスにメモリ リークが発生するために起こります。特定の不正なデータを含む投稿が一定量受信されると、利用可能なメモリが使い果たされ、サーバーが有益なサービスを提供できなくなる可能性があります。

**NNTPとは何ですか?**

[NNTP](http://www.ietf.org/rfc/rfc0977.txt?number=977) (英語情報) (Network News Transfer Protocol) は業界標準のプロトコルで、インターネット ベースのサーバーを介し、ニュース記事の投稿、配布、検索およびアーカイブの方法を指定します。この脆弱性は NNTP サービスを中断させるために使用される可能性のあるメモリ リークがWindows NT 4.0 および Windows 2000 の [NNTP 実装](http://www.microsoft.com/windows2000/ja/server/help/noc04.htm) で発生することが原因で起こります。

**メモリ リークとは何ですか?**

メモリ リークとはシステムで利用可能なメモリを使い果たす実装上のエラーです。コンピュータでのプロセスが動作する時、その動作の内容に応じてメモリを使用します。プロセスがさらにメモリを必要とする場合、オペレーティング システムにそのメモリを要求します。プロセスが追加のメモリを必要としなくなった場合、オペレーティング システムがほかのプロセスにそのメモリを割り当てられるように、メモリをオペレーティング システムに返却します。

メモリ リークは、プロセスがオペレーティング システムに正しくメモリを返却しない場合に発生します。メモリがほかのプロセスに割り当てるために利用可能となるのではなく、プロセスがメモリを必要としなくなっても、そのメモリが割り当てられたままとなります。これは事実上、そのメモリを利用不可能にします。

**この場合のメモリ リークはどのように発生するのですか?**

この脆弱性では、NNTP サービスが特定の不正なニュース投稿を処理する時に、メモリ リークが発生します。サービスが不正な投稿を受けると、オペレーティング システムからメモリを要求します。しかし、リクエストの処理が完了しても、サービスはメモリを返却しません。

**この脆弱性により、攻撃者は何ができますか?**

利用可能なメモリのプールを使い果たすために、攻撃者は不正なニュース投稿を該当するサーバーに繰り返し送信します。サーバーのメモリのプールが使用されるに従って、サーバーの性能が除々に低下します。攻撃者が一定期間攻撃を続けると、サーバーは停止し、有益なサービスを提供できなくなる可能性があります。

**NNTPサービスは既定で実行されますか?**

NNTP サービス実行の有無は、オペレーティング システムによって異なります。

-   Windows NT 4.0 は NNTP サービスを提供しません。NNTP サポートは Windows NT 4.0 Option Pack を介して提供されますが、既定ではインストールされません。
-   Windows 2000 Professional は NNTP サービスを提供しません。
-   Windows 2000 サーバー製品は NNTP サービスを提供しますが、既定ではインストール、または実行されません。

**NNTPがインストールされ、実行している場合、この脆弱性の影響を受けますか?**

はい、受けます。

**Exchange 5.5および2000もまたNNTPサービスを提供していますが、この脆弱性の影響を受けますか?**

Exchange 5.5 は、その実装が Windows NT 4.0 および Windows 2000 の NNTP サービスに依存していないため、メモリ リークは発生しません。したがって、Exchange 5.5 はこの脆弱性の影響を受けません。一方、Exchange 2000 はネイティブの Windows 2000 NNTP サービスを使用するため、Exchange 2000 サーバーが NNTP サービスを提供するように設定されている場合、この脆弱性の影響を受けます。

**この脆弱性を利用して、攻撃が成功した場合の影響は、NNTPサービスを妨害するのみですか?それとも、システムのほかのサービスも影響を受けますか?**

この脆弱性によってマシン上のすべてのサービスが使用するメモリ プールが使い果たされるため、攻撃が成功した場合、サービス停止のみでなく、マシン上のすべてのサービスのオペレーションに影響を及ぼします。そのため、例えば、マシンが共有ファイルもホストしている場合、マシンが攻撃を受けた後に、ユーザーは共有ファイルにアクセスできなくなる可能性があります。

**この脆弱性により、攻撃者はマシンでの権限を獲得することができますか?**

いいえ、できません。この脆弱性を利用して、攻撃が成功した場合の唯一の影響は、サーバーの通常のオペレーションを妨害することのみです。この脆弱性により、攻撃者が権限を獲得することはありません。また、データが改ざんされることもありません。

**影響を受けたサーバーは、どのようにしてサービスを再開できますか?**

IISAdmin サービスを再起動することによって、通常のサービスを再開できます。

**この脆弱性がインターネットから利用される可能性はありますか?**

この脆弱性は、投稿を送ることができるすべてのユーザーによって利用される可能性があります。サーバーがインターネットからの投稿を受信を受け入れていれば、インターネット ユーザーはこの脆弱性を利用することができます。

**Windows NT 4.0 Server、Terminal Server Editionを使用しています。この脆弱性による影響を受けますか?**

いいえ、受けません。Windows NT 4.0 Option Pack は NNTP サービスに同梱される媒体で、ターミナル サーバーにインストールすることはできません。

**自分の家のコンピュータから、よくニュース サーバーにアクセスします。この脆弱性による影響を受けますか?**

いいえ、受けません。この脆弱性は NNTP サービスを提供するサーバーのみに影響を及ぼします。そのようなサーバーにアクセスするクライアント マシンには影響を及ぼしません。

**この更新プログラムは何を修正しますか?**

この更新プログラムは Windows NT 4.0 および Windows 2000 の NNTP サービスが、ニュースの投稿の処理後、メモリの割り当てを適切に解除するように修正し、この脆弱性を排除します。

更新プログラム
--------------


この問題に対する日本語版更新プログラムは、次のサイトからダウンロードできます。

-   Windows NT 4.0 Server および Server, Enterprise Edition:
    [http://www.microsoft.com/downloads/details.aspx?FamilyId=71ED6722-E55A-41B5-8EF9-7FF5B2AEE40D&displaylang=ja](http://www.microsoft.com/downloads/details.aspx?familyid=71ed6722-e55a-41b5-8ef9-7ff5b2aee40d&displaylang=ja)
-   Windows 2000 Server および Advanced Server:
    この問題に対する修正は Windows 2000 Service Pack 3 以降に含まれています。Windows 2000 日本語版の最新の Service Pack は、以下の Web サイトから入手できます。

    <http://www.microsoft.com/japan/windows2000/downloads/>
    なお、個別の更新プログラムは以下の Web サイトから入手できます。

    -   PC/AT 互換機用
        [http://www.microsoft.com/downloads/details.aspx?FamilyId=DDD9AB2F-23A9-4A5E-9B02-CDA8D7DCE3DE&displaylang=ja](http://www.microsoft.com/downloads/details.aspx?familyid=ddd9ab2f-23a9-4a5e-9b02-cda8d7dce3de&displaylang=ja)
    -   NEC PC-9800 シリーズ用
        [http://download.microsoft.com/download/win2000platform/patchNEC/q303984/NT5/JA/q303984\_W2k\_sp3\_nec98\_ja.exe](http://download.microsoft.com/download/win2000platform/patchnec/q303984/nt5/ja/q303984_w2k_sp3_nec98_ja.exe)
-   Microsoft Windows 2000 Datacenter Server:
    Windows 2000 Datacenter Server の更新プログラムの適用に関してはそれぞれのデータセンター サーバーを購入されたハードウェア ベンダー様へご相談下さい。

**注:**  
NNTP サービスを提供している Exchange 2000 サーバーには Windows 2000 用の更新プログラムの適用が必要です。

#### 更新プログラムに関する追加情報

**対象プラットフォーム:**  

-   Windows NT 4.0 用の更新プログラムは Windows NT 4.0 [Service Pack 6a](http://www.microsoft.com/japan/ntserver/downloads/sp6a.mspx) を実行しているシステムにインストールすることができます。
-   Windows 2000 用の更新プログラムは Windows 2000 Service Pack 1 または Service Pack 2 を実行しているシステムにインストールすることができます。

**今後リリースされるサービス パックに含まれる更新プログラム:**  
Windows 2000 の問題に対する更新プログラムは Windows 2000 Service Pack 3 含まれています。また、Exchange 2000 Service Pack 2 に含まれる予定です。

**再起動の必要性:**  
あり

**更新プログラムに含まれる過去の修正:**  
なし

**更新プログラムのインストール確認方法:**  
Microsoft Windows NT 4.0:

-   この更新プログラムがマシンにインストールされたことを確認するためには、マシンに次のレジストリ キーが作成されたことを確認して下さい。

    HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Hotfix\\Q303984
-   各ファイルを確認するためには、サポート技術情報 [303984](http://support.microsoft.com/kb/303984) のファイル欄を参照して下さい。

Microsoft Windows 2000:

-   この更新プログラムがマシンにインストールされたことを確認するためには、マシンに次のレジストリ キーが作成されたことを確認して下さい。

    HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Updates\\Windows 2000\\SP3\\Q303984
-   各ファイルを確認するためには、次のレジストリ キーで、日付、時間そしてバージョン情報を参照して下さい。

    HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Updates\\Windows 2000\\SP3\\Q303984\\Filelist

**警告:**  
なし

**他のセキュリティ更新プログラムの入手先:**  
他のセキュリティ問題を解決する更新プログラムは以下のサイトから入手できます。

-   セキュリティ更新プログラムはマイクロソフト [ダウンロード センター](http://www.microsoft.com/downloads/results.aspx?displaylang=ja&freetext=security_patch)からダウンロードすることができます。「security\_patch」のキーワード検索によって容易に見つけることができます。
-   コンシューマ プラットフォーム用の更新プログラムは、[Microsoft Update](http://update.microsoft.com/microsoftupdate/)Web サイトからダウンロードできます。

更新プログラムについてのご質問は、マイクロソフト プロダクト サポート までご連絡ください。マイクロソフトでは、ご質問の内容が弊社製品の不具合が原因の場合、サポート料金はいただきません。それ以外の場合には、サポート料金を請求させていただきますのでご注意ください。

[マイクロソフト プロダクト サポートへの連絡方法はこちらをご覧ください。](http://www.microsoft.com/japan/security/support/patchqa.mspx)

### その他の情報

**詳細情報:**  

-   US マイクロソフトセキュリティ情報（MS01-043）
    [http://www.microsoft.com/technet/security/bulletin/ms01-043.mspx](http://technet.microsoft.com/security/bulletin/ms01-043)
-   サポート技術情報 （KB） 文書番号 ： 303984
    [Windows 2000 の NNTP サービスでメモリ リークが発生する](http://support.microsoft.com/kb/303984)

**更新履歴:**  

-   2001/8/15: このセキュリティ情報ページを公開しました。
-   2001/9/4: このセキュリティ情報を更新し、通常のサービスは IISAdimn サービスを再起動することにより、回復できることをお知らせしました。また、Exchange の NNTP サービスもこの脆弱性の影響を受けることをお知らせし、そして NNTP が既定で Windows NT 4.0 および 2000 にインストールされるかどうかを明確にしました。また、この問題に対する日本語版 KB を公開しました。

本セキュリティ情報に含まれている情報は、いかなる保証もない現状ベースで提供されるものです。Microsoft Corporation 及びその関連会社は、市場性および特定の目的への適合性を含めて、明示的にも黙示的にも、一切の保証をいたしません。さらに、Microsoft Corporation 及びその関連会社は、本文書に含まれている情報の使用及び使用結果につき、正確性、真実性等、いかなる表明・保証も行ないません。Microsoft Corporation、その関連会社及びこれらの権限ある代理人による口頭または書面による一切の情報提供またはアドバイスは、保証を意味するものではなく、かつ上記免責条項の範囲を狭めるものではありません。Microsoft Corporation、その関連会社 及びこれらの者の供給者は、直接的、間接的、偶発的、結果的損害、逸失利益、懲罰的損害、または特別損害を含む全ての損害に対して、状況のいかんを問わず一切責任を負いません。（Microsoft Corporation、その関連会社 またはこれらの者の供給者がかかる損害の発生可能性を了知している場合を含みます。) 結果的損害または偶発的損害に対する責任の免除または制限を認めていない地域においては、上記制限が適用されない場合があります。

*Built at 2014-04-18T01:50:00Z-07:00*
