---
TOCTitle: 'MS03-012'
Title: 'マイクロソフト セキュリティ情報 MS03-012 - 重要'
ms:assetid: 'ms03-012'
ms:contentKeyID: 61228509
ms:mtpsurl: 'https://technet.microsoft.com/ja-JP/library/ms03-012(v=Security.10)'
---


マイクロソフト セキュリティ情報 MS03-012 - 重要
===============================================

Winsock プロキシ サービスおよび ISA Firewall サービスの問題により、サービス拒否が起こる (331066)
------------------------------------------------------------------------------------------------

公開日: 2003年4月10日 | 最終更新日: 2003年6月16日

[](http://www.microsoft.com/japan/security/bulletins/ms03-012e.mspx)

#### 概要 :

**このセキュリティ情報の対象となるユーザー :**  
Microsoft® Proxy Server 2.0 または Microsoft Internet Security and Acceleration (ISA) Server 2000 を実行しているシステム管理者

**脆弱性の影響 :**  
サービス拒否

**最大深刻度 :**  
重要

**推奨する対応策 :**  
システム管理者は可能な限り早期にこの更新プログラムをインストールして下さい。

**影響を受けるソフトウェア :**  

-   Microsoft Proxy Server 2.0
-   Microsoft ISA Server (Microsoft Back Office Server 2000、Microsoft Small Business Server にも含まれています)

### 詳細

問題
----

<span></span>
**技術的な説明 :**  
Microsoft Proxy Server 2.0 の Winsock プロキシ サービスおよび ISA Server 2000 の Microsoft Firewall サービスに問題が存在します。この問題を悪用する事により、ISA Serverや Proxy Server 2.0 の内部ネットワークに存在する攻撃者から不正なパケットが送られた場合にISA Serverが内部および外部から送出されるリクエストに応答できない状態にされてしまう可能性があります。ISA Server や Proxy Server 2.0 は、内部ネットワークに指定されたネットワーク以外からここで述べる不正なパケットを受信しても、本問題は発生いたしません。ここで述べているような不正なパケットを内部ネットワークから受け取った ISA サーバーや Proxy Server は、CPU 使用率が 100% に達し、サーバーが応答しなくなる可能性があります。Winsock プロキシ サービスおよび Microsoft Firewall サービスは FTP、Telnet、メール、ニュース、インターネット リレー チャット (IRC) または Windows Sockets (Winsock) と互換性のあるそのほかのクライアント アプリケーションの中継サーバーとして動作します。この機能により、これらのアプリケーションを稼動させるクライアントは、隔離された内部ネットワークに接続されている状態であっても、インターネットと直接接続しているように動作できるようになります。先にあげたサービスは、必要な通信機能を Proxy Server 2.0 または ISA Server コンピュータにリダイレクトし、それを介し、内部のアプリケーションからインターネットへの通信パスを確立します。

**問題を緩和する要素 :**  

-   攻撃者により、この脆弱性が悪用されても、影響を受ける Proxy Server 2.0 または ISA Server コンピュータで高い権限が取得されることはありません。またキャッシュされたコンテンツが侵害されることはありません。この脆弱性の影響はサービス拒否のみです。
-   キャッシュ モードで実行されている ISA Server コンピュータは、Microsoft Firewall サービスが既定で無効であるため、この脆弱性の影響を受けません。統合モード、ファイアウォールモードで構成している場合にのみ発生します。

**深刻度 :**  

|                      |      |
|----------------------|------|
| **Proxy Server 2.0** | 重要 |
| **ISA Server**       | 重要 |

上記の[評価](http://technet.microsoft.com/security/bulletin/rating)はこの脆弱性の影響を受けるシステムの種類、システムの典型的な展開形式およびこの脆弱性がシステムに及ぼす影響に基づいています。

**脆弱性識別番号 :**  
[CAN-2003-0110](http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=can-2003-0110)

**テストしたバージョン :**  
マイクロソフトは Proxy Server 2.0 および ISA Serverのテストを行い、この脆弱性による影響を評価しました。それ以前のバージョンに関しては[サポート](http://support.microsoft.com/lifecycle/)の対象となっていないため、この脆弱性による影響は不明です。

よく寄せられる質問
------------------

<span></span>
**どのようなことが起こる可能性がありますか?**  

これは[サービス拒否](http://www.microsoft.com/japan/security/glossary.mspx)の脆弱性です。攻撃者はこの脆弱性を悪用し、Proxy Server 2.0 または ISA Server コンピュータがリクエストに応答しないようにする可能性があります。Proxy Server 2.0 の Winsock プロキシ サービスまたは ISA Server の Microsoft Firewall サービスを再起動することにより、Proxy Server 2.0 または ISA Server コンピュータは再度正しく機能しますが、依然として別のサービス拒否攻撃の影響を受ける状態となっています。

**どのようにして攻撃者はこの脆弱性を悪用する可能性がありますか?**  

攻撃者は不正なリクエストを作成し、それを Proxy Server 2.0 または ISA Server を実行しているコンピュータに送る可能性があります。

**攻撃者はこの脆弱性を悪用し、インターネットから攻撃を行う可能性はありますか?**  

インターネットからの攻撃は非常に特定の構成でのみ行われる可能性があります。パケット フィルタが Proxy Server 2.0 または ISA Server コンピュータの外部インターフェースに対するポート 1745 の受信トラフィックを許可するように構成されている場合のみ、インターネットからの攻撃の可能性があります。これは既定の設定ではなく、サーバーをそのように特別に構成する必要があるため、インターネットからの攻撃の可能性は低くなります。

**攻撃者にこの脆弱性を悪用される事により、なにが行われてしまいますか?**  

この脆弱性により、攻撃者は Proxy Server 2.0 及び ISA Server がすべてのリクエストに応答しないようにする可能性があります。

**この脆弱性により、攻撃者が** **Proxy Server 2.0** **または** **ISA Server** **コンピュータを制御する可能性はありますか?**  

いいえ、ありません。この脆弱性の影響はサービス拒否のみです。この脆弱性が悪用されても、Proxy Server 2.0 や ISA Server で管理者権限が取得されることはありません。

**攻撃者がこの脆弱性を悪用し、ファイアウォールのセキュリティを侵害する可能性はありますか?**  

いいえ、ありません。この脆弱性が悪用されても、ファイアウォールが提供するセキュリティが弱められることはありません。

**Proxy Server 2.0** **とは何ですか?**  

Microsoft Proxy Server 2.0 はクライアント コンピュータのインターネットへのゲートウェイとして機能します。プロキシ サーバーは一般的にプライベート ネットワークとインターネット間での媒介機能として動作します。また、Proxy Server 2.0 はインターネット コンテンツをキャッシュし、内部のユーザーのパフォーマンスを増大させ、送信ネットワーク帯域を削減します。

**ISA Server** **とは何ですか?**  

ISA Server はエンタープライズ ファイアウォールおよび高パフォーマンス Web キャッシュを提供します。このファイアウォールはファイアウォールを介し、どのリソースにどのような状況でアクセスできるかを規制することにより、ネットワークを保護します。Web キャッシュは頻繁にリクエストされる Web コンテンツのローカル コピーを保存することにより、ネットワークのパフォーマンスを向上する手助けをします。ISA Server は 3 つのモードでインストールすることができます。それらはファイアウォール モード、キャッシュ モードおよび統合モードです。
ファイアウォール モードにより、管理者は企業ネットワークとインターネット間の通信を制御する規則を構成することにより、ネットワーク通信をセキュアにすることができます。キャッシュ モードは頻繁にアクセスされる Web ページをサーバー自体に保存することにより、ネットワークのパフォーマンスを向上させます。統合モードでは、すべてのキャッシュおよびファイアウォール機能が利用可能です。

**Winsock** **とは何ですか?**  

Winsock とは Windows Socket の略で、TCP/IP ネットワーク プロトコルを使用して Windows プログラムがそのほかのコンピュータと通信できるようにするアプリケーション プログラミング インターフェース (API) です。

**Winsock** **プロキシサービスおよび** **Microsoft Firewall** **サービスとは何ですか?**  

Proxy Server 2.0 の Winsock プロキシ サービスおよび ISA Server の Microsoft Firewall サービスにより、インターネット アプリケーションは直接インターネットに接続しているように動作することができます。これらのサービスは必要な通信機能を Proxy Server 2.0 または ISA Server コンピュータにリダイレクトし、そのサーバー コンピュータを介し、内部のアプリケーションからインターネットへの通信パスを確立します。
これらのサービスにより、Network News Transfer Protocol (NNTP)、Simple Mail Transfer Protocol (SMTP)、Telnet、File Transfer Protocol (FTP) などの各プロトコルの特定のゲートウェイの必要がなくなります。

**Winsock** **プロキシサービスまたは** **Microsoft Firewall** **サービスは既定でインストールされますか?**  

Winsock プロキシ サービスは Proxy Server 2.0 で、既定で有効となっています。Microsoft Firewall サーバーは ISA Server ファイアウォール モードおよび ISA Server 統合モードのインストールを行うことにより既定で有効となっています。ISA Server キャッシュ モードのインストールでは無効となっています。

**これらのサービスがサーバーで実行されているかどうかをどのように確認できますか?**  

影響を受けるサービスがサーバーで実行されているかどうかを確認するためには、インストールされているソフトウェアのバージョンごとに次のステップにしたがって下さい。

-   Proxy Server 2.0 :
    -   \[スタート\] から \[すべてのプログラム\] の \[Microsoft Proxy Server\] で \[Microsoft 管理コンソール\] を開きます。
    -   \[MMC\] ウィンドウで \[コンソール ルート\]、\[Internet Information Server\] を拡張します。
    -   \[Winsock プロキシ\] が表示される場合、Winsock プロキシ サービスが実行されています。\[Winsock プロキシ (停止)\] が表示される場合、Winsock プロキシ サービスは停止しています。
-   SA Server :
    -   \[スタート\] から \[設定\] で \[コントロール パネル\] をクリックします。
    -   \[管理ツール\] をダブルクリックします。
    -   \[サービス\] をダブルクリックします。\[Microsoft Firewall\] が表示され、その状態が \[開始\] となっている場合、Microsoft Firewall サービスが実行されています。

**Proxy Server 2.0** **の** **Winsock** **プロキシサービスおよび** **ISA Server** **の** **Microsoft Firewall** **サービスの何が問題になっていますか?**  

これらのサービスはある条件で送られるリモート クライアントからの要求を正しく処理できないことが確認されました。特別に造りだされたリクエストが送られると、サーバーが後のリクエストに応答しなくなります。

**この脆弱性がもたらす脅威はどの程度ですか?**  

Proxy Server 2.0 では、Winsock プロキシ サービスは既定で有効となっています。ISA Server ファイアウォール モードおよび ISA Server 統合モードのインストールでは、Microsoft Firewall サービスは既定で有効となっています。つまり、内部のユーザーであれば、この脆弱性を悪用し Proxy Server 2.0 または ISA Server コンピュータをリクエストに応答しないようにできる可能性があります。Microsoft Firewall サービスは、キャッシュ モードで実行されている ISA Server コンピュータでは既定の状態で無効となっています。

**更新プログラムは何を修正しますか?**  

この更新プログラムは Winsock プロキシ サービスまたは Microsoft Firewall サービスが正しくリクエストに応答するようにして、サービス拒否攻撃の可能性を排除します。

更新プログラム
--------------

<span></span>
この問題に対する日本語版更新プログラムは、次のサイトからダウンロードできます。

-   Proxy Server 2.0:
    -   [http://microsoft.com/downloads/details.aspx?FamilyId=C81688B7-20FB-45EB-BAFD-031A0D2923E6&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=c81688b7-20fb-45eb-bafd-031a0d2923e6&displaylang=en)
-   ISA Server:
    -   [http://microsoft.com/downloads/details.aspx?FamilyId=3C43FAD2-A888-4603-84B7-1053C8663436&displaylang=ja](http://www.microsoft.com/downloads/details.aspx?familyid=3c43fad2-a888-4603-84b7-1053c8663436&displaylang=ja)

#### 更新プログラムに関する追加情報

**対象プラットフォーム :**  

**Microsoft Proxy Server 2.0 :**

この更新プログラムは [Proxy Server 2.0 Service Pack 1](http://www.microsoft.com/japan/isaserver/prodinfo/previousversions/) を実行しているシステムにインストールすることができます。

**この修正を含む予定のサービスパック :**  
この問題に対する更新プログラムは次の ISA Server 用のサービス パックに含まれる予定です。

**再起動の必要性 :**  
なし

**更新プログラムのアンインストール :**  
可

**更新プログラムに含まれる過去の修正 :**  
なし

**Microsoft ISA Server :**

この更新プログラムは ISA Server Service Pack 1 または ISA Server [Feature Pack 1](http://www.microsoft.com/downloads/details.aspx?familyid=2f92b02c-ac49-44df-af6c-5be084b345f9&displaylang=ja) を実行しているシステムにインストールすることができます。

**更新プログラムが正しくインストールされたかどうか確認する方法 :**  

-   **Proxy Server 2.0 :**
    -   この更新プログラムがマシンにインストールされたことを確認するためには、マシンに次のレジストリ キーが作成されたことを確認して下さい。
        HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\WindowsNT\\CurrentVersion\\HotFix\\Q331066
    -   各ファイルを確認するためには、以下のファイル欄に挙げられているファイルの日付、時間そしてバージョン情報を参照し、各ファイルを確認して下さい。

        `日付          時刻      サイズ    ファイル名-----------------------------------------------------------------2003/03/26    03:17     43,280   W3pcache.dll2003/03/26    03:17    192,784   W3proxy.dll2003/03/26    03:17     97,040   Wspsrv.exe`

        **注意 :**  
        修正されたファイルのバージョン番号は Service Pack 1 に含まれているファイルと同じバージョン番号になります。そのため、インストールの確認をする際は 日付 および ファイルサイズ をご確認ください。

-   **ISA Server :**
    -   この更新プログラムがマシンにインストールされたことを確認するためには、マシンに次のレジストリ キーが作成されたことを確認して下さい。
        HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Fpc\\Hotfixes\\SP1\\257
    -   または、次のステップに従い、更新プログラムがインストールされたかどうかを確認することができます。
        -   \[スタート\] から \[設定\] で \[コントロール パネル\] を開きます。
        -   \[アプリケーションの追加と削除\] をダブルクリックします。
        -   \[Microsoft ISA Server 2000 Updates\] をクリックします。
        -   \[変更\] をクリックします。
        -   ドロップ ダウン メニューを開きます。ISA Hot Fix 257 が表示される場合、この更新プログラムは正常にインストールされています。
    -   各ファイルを確認するためには、以下のファイル欄に挙げられているファイルの日付、時間そしてバージョン情報を参照し、各ファイルを確認して下さい。

        `日付 時刻 バージョン サイズ ファイル名-----------------------------------------------------------------2003/03/20 14:56 3.0.1200.257 178,448 Mspadmin.exe2003/03/20 14:55 3.0.1200.257 101,136 Msphlpr.dll2003/03/20 14:55 3.0.1200.257 391,440 W3proxy.exe2003/03/20 14:55 3.0.1200.257 298,768 Wspsrv.exe`

**警告 :**  
なし

**他のセキュリティ更新プログラムの入手先 :**  
他のセキュリティ問題を解決する更新プログラムは以下のサイトから入手できます。

-   セキュリティ更新プログラムは[マイクロソフト ダウンロード センター](http://www.microsoft.com/downloads/results.aspx?displaylang=ja&freetext=security_patch)からダウンロードすることができます。「security\_patch」 のキーワード探索によって容易に見つけることができます。
-   コンシューマ プラットフォーム用の更新プログラムは、[Microsoft Update](http://update.microsoft.com/microsoftupdate/)Web サイトからダウンロードできます。
-   本セキュリティ情報及び公開された更新プログラムは、[TechNet CD サブスクリプション](http://www.microsoft.com/japan/technet/subscriptions/)でも入手可能です。

更新プログラムについてのご質問は、マイクロソフト プロダクト サポート までご連絡ください。マイクロソフトでは、ご質問の内容が弊社製品の不具合が原因の場合、サポート料金はいただきません。それ以外の場合には、サポート料金を請求させていただきますのでご注意ください。
[マイクロソフト プロダクト サポートへの連絡方法はこちらをご覧ください。](http://www.microsoft.com/japan/security/support/patchqa.mspx)

### その他の情報

**詳細情報 :**  

-   US マイクロソフトセキュリティ情報（MS03-012）  
    [http://www.microsoft.com/technet/security/bulletin/ms03-012.mspx](http://technet.microsoft.com/security/bulletin/ms03-012)
-   サポート技術情報 （KB） 文書番号 ： 331066  
    [\[MS03-012\] Winsock プロキシ サービスの問題によりサービス拒否攻撃が可能になる](http://support.microsoft.com/kb/331066)

**更新履歴 :**  

-   2003/4/10: このセキュリティ情報ページを公開しました。
-   2003/4/14: この問題に対するマイクロソフト サポート技術情報 331066 日本語版を公開しました。
-   2003/6/16: 「絵でみるセキュリティ情報」 へのリンクを追加しました。

本セキュリティ情報に含まれている情報は、いかなる保証もない現状ベースで提供されるものです。Microsoft Corporation 及びその関連会社は、市場性および特定の目的への適合性を含めて、明示的にも黙示的にも、一切の保証をいたしません。さらに、Microsoft Corporation 及びその関連会社は、本文書に含まれている情報の使用及び使用結果につき、正確性、真実性等、いかなる表明・保証も行ないません。Microsoft Corporation、その関連会社及びこれらの権限ある代理人による口頭または書面による一切の情報提供またはアドバイスは、保証を意味するものではなく、かつ上記免責条項の範囲を狭めるものではありません。Microsoft Corporation、その関連会社 及びこれらの者の供給者は、直接的、間接的、偶発的、結果的損害、逸失利益、懲罰的損害、または特別損害を含む全ての損害に対して、状況のいかんを問わず一切責任を負いません。（Microsoft Corporation、その関連会社 またはこれらの者の供給者がかかる損害の発生可能性を了知している場合を含みます。) 結果的損害または偶発的損害に対する責任の免除または制限を認めていない地域においては、上記制限が適用されない場合があります。

*Built at 2014-04-18T01:50:00Z-07:00*
