---
TOCTitle: 'ルーチン操作 ‐ ディスク クォータの管理'
Title: 'ルーチン操作 ‐ ディスク クォータの管理'
ms:assetid: 'effedae1-745c-4037-83c6-5446ab5bd4c0'
ms:contentKeyID: 19871941
ms:mtpsurl: 'https://technet.microsoft.com/ja-jp/library/Dd362996(v=TechNet.10)'
---

ルーチン操作
============

### ディスク クォータの管理

最終更新日: 2002年12月27日

##### 目次

[](#edaa)[ディスク クォータの設定](#edaa)
[](#ecaa)[ディスク クォータの状態の判断](#ecaa)
[](#ebaa)[ディスク クォータの監視](#ebaa)
[](#eaaa)[ディスク クォータ制限の超過](#eaaa)

Windows 2000 のディスク クォータは、ユーザーとボリューム単位でディスク記憶域の使用状況を追跡および管理します。Windows 2000 では、同じハード ディスク上にボリュームがある場合でも、ボリュームごとにディスク クォータを追跡します。ユーザー単位でクォータが追跡されるので、ユーザーがどのフォルダにファイルを格納しているかに関係なく、ディスク領域が追跡されます。

以下の一覧では、Windows 2000 のディスク クォータの重要な特徴について説明しています。

-   Windows 2000 では、ユーザーが所有するファイルとフォルダに基づいてディスク領域の使用状況を集計します。ユーザーが NTFS ボリュームへファイルをコピーまたは保存した場合、または NTFS ボリューム上のファイルの所有権を取得した場合に、ファイルが占有するディスク領域がユーザーのクォータ制限値に対する使用領域とみなされます。

-   ファイルを圧縮しても、ハード ディスク領域の使用状況の統計には影響しません。実際の占有ハード ディスク領域に関係なく、圧縮前のバイト数が加算されます。この適用方法がとられる一因は、ファイルの圧縮割合がファイルの種類ごとに異なるためです。 圧縮時のサイズが同じでもファイルの種類が異なる場合、実際のサイズが圧縮されたときと大幅に異なる場合があります。

-   ディスク クォータが有効な場合、アプリケーションに報告されるそのボリュームの空きディスク領域は、ユーザーのディスク クォータ制限値内の残りの容量になります。たとえば、100 MB の割り当てディスク クォータ制限値のうち、ユーザーのファイルが 50 MB を占めると、そのボリュームに数ギガバイトの空き領域があっても、空き領域は 50 MB と表示されます。

ディスク クォータを使用すると、ハード ディスク領域の使用状況を監視および管理することができます。システム管理者は以下のタスクを実行できます。

-   ディスク クォータの制限値を設定し、ユーザーごとのディスク領域を指定します。

-   ディスク クォータの警告レベルを設定すると、ログにイベントを記録し、制限値に近づいていることを通知できます。

-   ディスク クォータの制限値を適用し、制限値を超えた場合にユーザー アクセスを拒否するか、引き続き許可するかを指定します。

-   指定されたディスク領域のしきい値を超えた場合に、イベントのログを記録します。たとえば、クォータの制限値を超えた時点、または警告レベルを超えた時点をしきい値にすることができます。

ボリュームのディスク クォータを有効にすると、そのボリュームのファイルとフォルダを所有するすべてのユーザーのディスク使用状況のデータが収集されます。これにより、**ユーザー単位のボリューム使用状況**を監視できます。**既定では、Administrators グループのメンバのみ**、クォータ設定を表示および変更することができます。ただし、管理者はクォータ設定の表示をユーザーに許可することができます。

### ディスク クォータの設定

権限のある管理者は、ディスク クォータを有効にし、すべてのユーザーまたはユーザー個々にディスク クォータの警告レベルと制限値を適用することができます。

1.  **\[マイ コンピュータ\]** をダブルクリックして開きます。

2.  ディスク クォータを有効にするディスク ボリュームを右クリックし、**\[プロパティ\]** をクリックします。ボリュームが NTFS ファイル システムでフォーマットされていない場合、または Administrators グループのメンバでない場合は、ボリュームの \[プロパティ\] ダイアログ ボックスに **\[クォータ\]** タブが表示されません。

3.  **\[プロパティ\]** ダイアログ ボックスの **\[クォータ\]** タブをクリックします。

    ![](images/Dd362996.w2kab196(ja-jp,TechNet.10).gif)

4.  **\[クォータ\]** のプロパティ ページの **\[クォータの管理を有効にする\]** チェック ボックスをオンにし、ディスク クォータ オプションを設定して、**\[OK\]** をクリックします。次の表では、\[クォータ\] タブのオプションについて説明しています。

 
<table style="border:1px solid black;">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>オプション</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="border:1px solid black;"><strong>クォータの管理を有効にする</strong></td>
<td style="border:1px solid black;">ディスク クォータの管理を有効にするときにこのボックスを選択します。</td>
</tr>
<tr class="even">
<td style="border:1px solid black;"><strong>クォータ制限を超過したユーザーのディスク割り当てを拒否する</strong></td>
<td style="border:1px solid black;">このボックスを選択すると、ハード ディスク領域割り当てを超過したユーザーには、「ディスク領域の不足」メッセージが表示され、ボリュームに書き込みできません。</td>
</tr>
<tr class="odd">
<td style="border:1px solid black;"><strong>ディスクの使用を制限しない</strong></td>
<td style="border:1px solid black;">ユーザーのハード ディスク領域の制限が必要ない場合に、このオプションを選択します。</td>
</tr>
<tr class="even">
<td style="border:1px solid black;"><strong>ディスク領域を制限する</strong></td>
<td style="border:1px solid black;">ユーザーが使用できるディスク領域を設定します。</td>
</tr>
<tr class="odd">
<td style="border:1px solid black;"><strong>警告レベルの設定</strong></td>
<td style="border:1px solid black;">この値を超えるディスク領域をユーザーが使用すると、イベントのログが記録され、制限値に近づいていることが表示されます。</td>
</tr>
<tr class="even">
<td style="border:1px solid black;"><strong>クォータ エントリ</strong></td>
<td style="border:1px solid black;">このボタンをクリックすると、<strong>[クォータ エントリ]</strong> のダイアログ ボックスが開きます。ここでは、権限のある管理者による新しいエントリの追加、エントリの削除、およびユーザーごとのクォータ情報の表示が可能です。</td>
</tr>
</tbody>
</table>
  
1.  すべてのユーザーに同じクォータ制限を適用するには、**\[ディスク領域を制限する\]** テキスト ボックスと **\[警告レベルの設定\]** テキスト ボックスに適切な値を入力し、**\[クォータ制限を超過したユーザーのディスク割り当てを拒否する\]** チェック ボックスをオンにします。
  
    ![](images/Dd362996.w2kab197(ja-jp,TechNet.10).gif)
  
使用状況が監視され、制限値を超えた場合、ユーザーはファイルまたはフォルダをボリューム上に作成できなくなります。
  
[](#mainsection)[ページのトップへ](#mainsection)
  
### ディスク クォータの状態の判断
  
ディスクの \[プロパティ\] ダイアログ ボックスの信号アイコンを確認し、右側の状態メッセージを読むことで、ディスク クォータ状態を判断することができます。信号の色とそれぞれが示す状態は以下のとおりです。
  
-   赤色の信号は、ディスク クォータが無効であることを示します。
  
-   黄色の信号は、Windows 2000 でディスク クォータ情報が再構築されていることを示します。
  
-   緑色の信号は、ディスク クォータ システムがアクティブであることを示します。
  
[](#mainsection)[ページのトップへ](#mainsection)
  
### ディスク クォータの監視
  
権限のある管理者は、**\[&lt;ボリューム名&gt; のクォータ エントリ\]** ダイアログ ボックスを使用して、そのボリューム上のファイルとフォルダに対してコピー、保存、および所有権の取得を行うすべてのユーザーの使用状況を監視することができます。Windows 2000 ではボリュームをスキャンし、ユーザーごとのディスク領域の使用状況を監視します。**\[&lt;ボリューム名&gt; のクォータ エントリ\]** ダイアログ ボックスでは、次の情報を表示できます。
  
-   各ユーザーの使用しているハード ディスク領域
  
-   クォータの警告しきい値を超えたユーザー。これは黄色の三角形で通知されます。
  
-   クォータ制限値を超えたユーザー。これは赤色の円で通知されます。
  
-   各ユーザーの警告のしきい値とディスク クォータ制限
  
ディスク クォータ システムがアクティブになっているボリューム上に、ファイルを所有しているすべてのユーザーのボリューム使用状況が追跡されます。権限のある管理者が **\[&lt;ボリューム名&gt; のクォータ エントリ\]** ダイアログ ボックスを使用してクォータ設定を変更しない限り、ファイルを所有している既存のユーザーのディスク クォータは、既定値に制限されます。ボリューム上にファイルを所有していないユーザーは、**\[&lt;ボリューム名&gt; のクォータ エントリ\]** ダイアログ ボックスに表示されませんが、手動で追加することもできます。クォータの制限値は、既定で Administrators ローカル グループには適用されません。
  
[](#mainsection)[ページのトップへ](#mainsection)
  
### ディスク クォータ制限の超過
  
**\[クォータ制限を超過したユーザーのディスク割り当てを拒否する\]** オプションが選択されている場合、ユーザーの使用するディスク領域がクォータの制限値を超えたときに、「ディスク領域が不足しています」というエラーが表示され、既存のファイルを削除または移動しない限り、ボリュームに新しいデータを書き込むことができません。
  
このような状況のエラー処理は、個々のプログラムによって異なります。プログラム側では、ボリュームの空き領域がないと認識されます。このオプションをオフにしておくと、ユーザーはクォータの制限値を超えてディスク領域を使用できます。ユーザーに対してボリューム アクセスを拒否せず、ユーザー単位でディスク領域の使用を追跡する場合は、クォータを有効にし、ディスク領域の使用を制限しないでおきます。また、ユーザーがクォータ警告レベルまたはクォータ制限を超えたときに、イベントをログに記録するかどうかを指定できます。
  
**\[ユーザーがクォータ制限値を超えたらイベントをログに記録する\]** を選択した場合は、ユーザーがクォータの制限値を超えたときに、ディスク クォータを実行するコンピュータ上の Windows システム ログにイベントが書き込まれます。権限のある管理者は、イベント ビューアでディスク イベントの種類ごとにフィルタ処理し、これらのイベントを表示できます。
  
**\[ユーザーが警告レベルを超えたらイベントをログに記録する\]** を選択した場合は、ユーザーがクォータの警告レベルを超えたときに、ディスク クォータを実行するコンピュータ上の Windows システム ログにイベントが書き込まれます。権限のある管理者は、イベント ビューアでディスク イベントの種類ごとにフィルタ処理して、これらのイベントを表示できます。これを実行するトリガを設定しない限り、ユーザーに対してこのイベントの警告は行われません。
  
**ユーザーのディスク領域と警告レベルを変更するには、以下を実行します。**
  
1.  クォータ値を変更するボリュームを右クリックし、**\[プロパティ\]** をクリックします。
  
2.  \[プロパティ\] ダイアログ ボックスで、**\[クォータ\]** タブをクリックします。
  
3.  **\[クォータ\]** のプロパティ ページで **\[クォータ エントリ\]** をクリックします。
  
4.  **\[クォータ エントリ\]** ウィンドウで、オプションを変更するユーザーのエントリをクリックし、**\[クォータ\]** メニューの **\[プロパティ\]** をクリックします。
  
5.  **\[クォータ設定\]** ダイアログ ボックスで、次のいずれかのオプションを変更し、**\[OK\]** をクリックします。
  
**\[ディスクの使用を制限しない\]。**ディスク領域を制限せずに、ディスク領域の使用状況を追跡するときにクリックします。
  
**\[ディスク領域を制限する\]。**ディスク領域を制限し、警告レベルを設定するためのフィールドをアクティブにします。テキスト ボックスに数値を入力し、ドロップダウン メニューでディスク領域の制限値の単位を選択します。小数値を使用できます (20.5 MB など)。ボリュームの最大容量を超える値は入力できません。
  
**クォータ エントリを削除するには、以下を実行します。**
  
1.  削除するクォータ エントリを含むボリュームを右クリックし、**\[プロパティ\]** をクリックします。
  
2.  **\[プロパティ\]** ダイアログ ボックスで、**\[クォータ\]** タブをクリックします。
  
3.  **\[クォータ\]** のプロパティ ページで **\[クォータ エントリ\]** をクリックします。
  
4.  **\[クォータ エントリ\]** ウィンドウで、削除するユーザーのエントリをクリックし、**\[クォータ\]** メニューの **\[クォータ エントリの削除\]** をクリックします。
  
5.  **\[ディスク クォータ\]** ダイアログ ボックスが表示された場合は、**\[はい\]** をクリックし、操作の対象となるファイルをクリックします。次に、以下のいずれかのボタンをクリックし、**\[閉じる\]** をクリックします。
  
**\[削除\]。**選択したファイルをボリュームから削除します。
  
**\[所有権の取得\]。**ボリューム上の選択したファイルの所有権を与えます。
  
**\[移動\]。**選択したファイルを指定したボリュームに移動します。
  
**ディスク クォータを無効にするには、以下を実行します。**
  
1.  ディスク クォータを無効にするボリュームを右クリックし、**\[プロパティ\]** をクリックします。
  
2.  **\[プロパティ\]** ダイアログ ボックスで、**\[クォータ\]** タブをクリックします。
  
3.  **\[クォータ\]** タブで、**\[クォータの管理を有効にする\]** チェック ボックスをオフにし、**\[OK\]** をクリックします。
  
[](#mainsection)[ページのトップへ](#mainsection)
